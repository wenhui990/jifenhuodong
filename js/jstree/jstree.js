(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(e,f){
/*!
 * jsTree 3.0.9
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
if(e.jstree){return}var m=0,b=false,r=false,l=false,n=[],h=e("script:last").attr("src"),d=document,g=d.createElement("LI"),k,j;g.setAttribute("role","treeitem");k=d.createElement("I");k.className="jstree-icon jstree-ocl";k.setAttribute("role","presentation");g.appendChild(k);k=d.createElement("A");k.className="jstree-anchor";k.setAttribute("href","#");k.setAttribute("tabindex","-1");j=d.createElement("I");j.className="jstree-icon jstree-themeicon";j.setAttribute("role","presentation");k.appendChild(j);g.appendChild(k);k=j=null;e.jstree={version:"3.0.9",defaults:{plugins:[]},plugins:{},path:h&&h.indexOf("/")!==-1?h.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g};e.jstree.create=function(v,s){var u=new e.jstree.core(++m),t=s;s=e.extend(true,{},e.jstree.defaults,s);if(t&&t.plugins){s.plugins=t.plugins}e.each(s.plugins,function(x,w){if(x!=="core"){u=u.plugin(w,s[w])}});u.init(v,s);return u};e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy");e(document).off(".jstree")};e.jstree.core=function(s){this._id=s;this._cnt=0;this._wrk=null;this._data={core:{themes:{name:false,dots:false,icons:false},selected:[],last_error:{},working:false,worker_queue:[],focused:null}}};e.jstree.reference=function(u){var s=null,t=null;if(u&&u.id){u=u.id}if(!t||!t.length){try{t=e(u)}catch(v){}}if(!t||!t.length){try{t=e("#"+u.replace(e.jstree.idregex,"\\$&"))}catch(v){}}if(t&&t.length&&(t=t.closest(".jstree")).length&&(t=t.data("jstree"))){s=t}else{e(".jstree").each(function(){var w=e(this).data("jstree");if(w&&w._model.data[u]){s=w;return false}})}return s};e.fn.jstree=function(t){var v=(typeof t==="string"),u=Array.prototype.slice.call(arguments,1),s=null;if(t===true&&!this.length){return false}this.each(function(){var w=e.jstree.reference(this),x=v&&w?w[t]:null;s=v&&x?x.apply(w,u):null;if(!w&&!v&&(t===f||e.isPlainObject(t))){e(this).data("jstree",new e.jstree.create(this,t))}if((w&&!v)||t===true){s=w||false}if(s!==null&&s!==f){return false}});return s!==null&&s!==f?s:this};e.expr[":"].jstree=e.expr.createPseudo(function(s){return function(t){return e(t).hasClass("jstree")&&e(t).data("jstree")!==f}});e.jstree.defaults.core={data:false,strings:false,check_callback:false,error:e.noop,animation:200,multiple:true,themes:{name:false,url:false,dir:false,dots:true,icons:true,stripes:false,variant:false,responsive:false},expand_selected_onload:true,worker:true,force_text:false,dblclick_toggle:true};e.jstree.core.prototype={plugin:function(u,t){var s=e.jstree.plugins[u];if(s){this._data[u]={};s.prototype=this;return new s(t,this)}return this},init:function(t,s){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:false}}},changed:[],force_full_redraw:false,redraw_timeout:false,default_state:{loaded:true,opened:false,selected:false,disabled:false}};this.element=e(t).addClass("jstree jstree-"+this._id);this.settings=s;this._data.core.ready=false;this._data.core.loaded=false;this._data.core.rtl=(this.element.css("direction")==="rtl");this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");if(this.settings.core.multiple){this.element.attr("aria-multiselectable",true)}if(!this.element.attr("tabindex")){this.element.attr("tabindex","0")}this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(true);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading");this._data.core.li_height=this.get_container_ul().children("li").first().height()||24;this.trigger("loading");this.load_node("#")},destroy:function(s){if(this._wrk){try{window.URL.revokeObjectURL(this._wrk);this._wrk=null}catch(t){}}if(!s){this.element.empty()}this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});this.element=null},bind:function(){var t="",s=null,u=0;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var v=window.getSelection();try{v.removeAllRanges();v.collapse()}catch(w){}}}}).on("mousedown.jstree",e.proxy(function(v){if(v.target===this.element[0]){v.preventDefault();u=+(new Date())}},this)).on("mousedown.jstree",".jstree-ocl",function(v){v.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(v){this.toggle_node(v.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(v){if(this.settings.core.dblclick_toggle){this.toggle_node(v.target)}},this)).on("click.jstree",".jstree-anchor",e.proxy(function(v){v.preventDefault();if(v.currentTarget!==document.activeElement){e(v.currentTarget).focus()}this.activate_node(v.currentTarget,v)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(v){if(v.target.tagName==="INPUT"){return true}var w=null;if(this._data.core.rtl){if(v.which===37){v.which=39}else{if(v.which===39){v.which=37}}}switch(v.which){case 32:if(v.ctrlKey){v.type="click";e(v.currentTarget).trigger(v)}break;case 13:v.type="click";e(v.currentTarget).trigger(v);break;case 37:v.preventDefault();if(this.is_open(v.currentTarget)){this.close_node(v.currentTarget)}else{w=this.get_parent(v.currentTarget);if(w&&w.id!=="#"){this.get_node(w,true).children(".jstree-anchor").focus()}}break;case 38:v.preventDefault();w=this.get_prev_dom(v.currentTarget);if(w&&w.length){w.children(".jstree-anchor").focus()}break;case 39:v.preventDefault();if(this.is_closed(v.currentTarget)){this.open_node(v.currentTarget,function(x){this.get_node(x,true).children(".jstree-anchor").focus()})}else{if(this.is_open(v.currentTarget)){w=this.get_node(v.currentTarget,true).children(".jstree-children")[0];if(w){e(this._firstChild(w)).children(".jstree-anchor").focus()}}}break;case 40:v.preventDefault();w=this.get_next_dom(v.currentTarget);if(w&&w.length){w.children(".jstree-anchor").focus()}break;case 106:this.open_all();break;case 36:v.preventDefault();w=this._firstChild(this.get_container_ul()[0]);if(w){e(w).children(".jstree-anchor").filter(":visible").focus()}break;case 35:v.preventDefault();this.element.find(".jstree-anchor").filter(":visible").last().focus();break}},this)).on("load_node.jstree",e.proxy(function(w,v){if(v.status){if(v.node.id==="#"&&!this._data.core.loaded){this._data.core.loaded=true;if(this._firstChild(this.get_container_ul()[0])){this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id)}this.trigger("loaded")}if(!this._data.core.ready){setTimeout(e.proxy(function(){if(!this.get_container_ul().find(".jstree-loading").length){this._data.core.ready=true;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var z=[],y,x;for(y=0,x=this._data.core.selected.length;y<x;y++){z=z.concat(this._model.data[this._data.core.selected[y]].parents)}z=e.vakata.array_unique(z);for(y=0,x=z.length;y<x;y++){this.open_node(z[y],false,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0)}}},this)).on("keypress.jstree",e.proxy(function(z){if(z.target.tagName==="INPUT"){return true}if(s){clearTimeout(s)}s=setTimeout(function(){t=""},500);var x=String.fromCharCode(z.which).toLowerCase(),w=this.element.find(".jstree-anchor").filter(":visible"),y=w.index(document.activeElement)||0,v=false;t+=x;if(t.length>1){w.slice(y).each(e.proxy(function(B,A){if(e(A).text().toLowerCase().indexOf(t)===0){e(A).focus();v=true;return false}},this));if(v){return}w.slice(0,y).each(e.proxy(function(B,A){if(e(A).text().toLowerCase().indexOf(t)===0){e(A).focus();v=true;return false}},this));if(v){return}}if(new RegExp("^"+x+"+$").test(t)){w.slice(y+1).each(e.proxy(function(B,A){if(e(A).text().toLowerCase().charAt(0)===x){e(A).focus();v=true;return false}},this));if(v){return}w.slice(0,y+1).each(e.proxy(function(B,A){if(e(A).text().toLowerCase().charAt(0)===x){e(A).focus();v=true;return false}},this));if(v){return}}},this)).on("init.jstree",e.proxy(function(){var v=this.settings.core.themes;this._data.core.themes.dots=v.dots;this._data.core.themes.stripes=v.stripes;this._data.core.themes.icons=v.icons;this.set_theme(v.name||"default",v.url);this.set_theme_variant(v.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(v){this._data.core.focused=null;e(v.currentTarget).filter(".jstree-hovered").mouseleave();this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(w){var v=this.get_node(w.currentTarget);if(v&&v.id){this._data.core.focused=v.id}this.element.find(".jstree-hovered").not(w.currentTarget).mouseleave();e(w.currentTarget).mouseenter();this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+(new Date())-u>500&&!this._data.core.focused){u=0;this.get_node(this.element.attr("aria-activedescendant"),true).find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(v){this.hover_node(v.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(v){this.dehover_node(v.currentTarget)},this))},unbind:function(){this.element.off(".jstree");e(document).off(".jstree-"+this._id)},trigger:function(s,t){if(!t){t={}}t.instance=this;this.element.triggerHandler(s.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var s=this.settings.core.strings;if(e.isFunction(s)){return s.call(this,t)}if(s&&s[t]){return s[t]}return t},_firstChild:function(s){s=s?s.firstChild:null;while(s!==null&&s.nodeType!==1){s=s.nextSibling}return s},_nextSibling:function(s){s=s?s.nextSibling:null;while(s!==null&&s.nodeType!==1){s=s.nextSibling}return s},_previousSibling:function(s){s=s?s.previousSibling:null;while(s!==null&&s.nodeType!==1){s=s.previousSibling}return s},get_node:function(u,s){if(u&&u.id){u=u.id}var v;try{if(this._model.data[u]){u=this._model.data[u]}else{if(typeof u==="string"&&this._model.data[u.replace(/^#/,"")]){u=this._model.data[u.replace(/^#/,"")]}else{if(typeof u==="string"&&(v=e("#"+u.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[v.closest(".jstree-node").attr("id")]){u=this._model.data[v.closest(".jstree-node").attr("id")]}else{if((v=e(u,this.element)).length&&this._model.data[v.closest(".jstree-node").attr("id")]){u=this._model.data[v.closest(".jstree-node").attr("id")]}else{if((v=e(u,this.element)).length&&v.hasClass("jstree")){u=this._model.data["#"]}else{return false}}}}}if(s){u=u.id==="#"?this.element:e("#"+u.id.replace(e.jstree.idregex,"\\$&"),this.element)}return u}catch(t){return false}},get_path:function(x,v,u){x=x.parents?x:this.get_node(x);if(!x||x.id==="#"||!x.parents){return false}var t,s,w=[];w.push(u?x.id:x.text);for(t=0,s=x.parents.length;t<s;t++){w.push(u?x.parents[t]:this.get_text(x.parents[t]))}w=w.reverse().slice(1);return v?w.join(v):w},get_next_dom:function(u,s){var t;u=this.get_node(u,true);if(u[0]===this.element[0]){t=this._firstChild(this.get_container_ul()[0]);while(t&&t.offsetHeight===0){t=this._nextSibling(t)}return t?e(t):false}if(!u||!u.length){return false}if(s){t=u[0];do{t=this._nextSibling(t)}while(t&&t.offsetHeight===0);return t?e(t):false}if(u.hasClass("jstree-open")){t=this._firstChild(u.children(".jstree-children")[0]);while(t&&t.offsetHeight===0){t=this._nextSibling(t)}if(t!==null){return e(t)}}t=u[0];do{t=this._nextSibling(t)}while(t&&t.offsetHeight===0);if(t!==null){return e(t)}return u.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(u,s){var t;u=this.get_node(u,true);if(u[0]===this.element[0]){t=this.get_container_ul()[0].lastChild;while(t&&t.offsetHeight===0){t=this._previousSibling(t)}return t?e(t):false}if(!u||!u.length){return false}if(s){t=u[0];do{t=this._previousSibling(t)}while(t&&t.offsetHeight===0);return t?e(t):false}t=u[0];do{t=this._previousSibling(t)}while(t&&t.offsetHeight===0);if(t!==null){u=e(t);while(u.hasClass("jstree-open")){u=u.children(".jstree-children").first().children(".jstree-node:visible:last")}return u}t=u[0].parentNode.parentNode;return t&&t.className&&t.className.indexOf("jstree-node")!==-1?e(t):false},get_parent:function(s){s=this.get_node(s);if(!s||s.id==="#"){return false}return s.parent},get_children_dom:function(s){s=this.get_node(s,true);if(s[0]===this.element[0]){return this.get_container_ul().children(".jstree-node")}if(!s||!s.length){return false}return s.children(".jstree-children").children(".jstree-node")},is_parent:function(s){s=this.get_node(s);return s&&(s.state.loaded===false||s.children.length>0)},is_loaded:function(s){s=this.get_node(s);return s&&s.state.loaded},is_loading:function(s){s=this.get_node(s);return s&&s.state&&s.state.loading},is_open:function(s){s=this.get_node(s);return s&&s.state.opened},is_closed:function(s){s=this.get_node(s);return s&&this.is_parent(s)&&!s.state.opened},is_leaf:function(s){return !this.is_parent(s)},load_node:function(w,y){var t,s,v,u,x;if(e.isArray(w)){this._load_nodes(w.slice(),y);return true}w=this.get_node(w);if(!w){if(y){y.call(this,w,false)}return false}if(w.state.loaded){w.state.loaded=false;for(t=0,s=w.children_d.length;t<s;t++){for(v=0,u=w.parents.length;v<u;v++){this._model.data[w.parents[v]].children_d=e.vakata.array_remove_item(this._model.data[w.parents[v]].children_d,w.children_d[t])}if(this._model.data[w.children_d[t]].state.selected){x=true;this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,w.children_d[t])}delete this._model.data[w.children_d[t]]}w.children=[];w.children_d=[];if(x){this.trigger("changed",{action:"load_node",node:w,selected:this._data.core.selected})}}w.state.loading=true;this.get_node(w,true).addClass("jstree-loading").attr("aria-busy",true);this._load_node(w,e.proxy(function(z){w=this._model.data[w.id];w.state.loading=false;w.state.loaded=z;var A=this.get_node(w,true);if(w.state.loaded&&!w.children.length&&A&&A.length&&!A.hasClass("jstree-leaf")){A.removeClass("jstree-closed jstree-open").addClass("jstree-leaf")}A.removeClass("jstree-loading").attr("aria-busy",false);this.trigger("load_node",{node:w,status:z});if(y){y.call(this,w,z)}},this));return true},_load_nodes:function(t,z,w){var x=true,y=function(){this._load_nodes(t,z,true)},s=this._model.data,v,u;for(v=0,u=t.length;v<u;v++){if(s[t[v]]&&(!s[t[v]].state.loaded||!w)){if(!this.is_loading(t[v])){this.load_node(t[v],y)}x=false}}if(x){if(z&&!z.done){z.call(this,t);z.done=true}}},load_all:function(w,y){if(!w){w="#"}w=this.get_node(w);if(!w){return false}var v=[],s=this._model.data,x=s[w.id].children_d,u,t;if(w.state&&!w.state.loaded){v.push(w.id)}for(u=0,t=x.length;u<t;u++){if(s[x[u]]&&s[x[u]].state&&!s[x[u]].state.loaded){v.push(x[u])}}if(v.length){this._load_nodes(v,function(){this.load_all(w,y)})}else{if(y){y.call(this,w)}this.trigger("load_all",{node:w})}},_load_node:function(w,x){var v=this.settings.core.data,u;if(!v){if(w.id==="#"){return this._append_html_data(w,this._data.core.original_container_html.clone(true),function(s){x.call(this,s)})}else{return x.call(this,false)}}if(e.isFunction(v)){return v.call(this,w,e.proxy(function(s){if(s===false){x.call(this,false)}this[typeof s==="string"?"_append_html_data":"_append_json_data"](w,typeof s==="string"?e(s):s,function(t){x.call(this,t)})},this))}if(typeof v==="object"){if(v.url){v=e.extend(true,{},v);if(e.isFunction(v.url)){v.url=v.url.call(this,w)}if(e.isFunction(v.data)){v.data=v.data.call(this,w)}return e.ajax(v).done(e.proxy(function(A,y,s){var z=s.getResponseHeader("Content-Type");if(z.indexOf("json")!==-1||typeof A==="object"){return this._append_json_data(w,A,function(t){x.call(this,t)})}if(z.indexOf("html")!==-1||typeof A==="string"){return this._append_html_data(w,e(A),function(t){x.call(this,t)})}this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:w.id,xhr:s})};this.settings.core.error.call(this,this._data.core.last_error);return x.call(this,false)},this)).fail(e.proxy(function(s){x.call(this,false);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:w.id,xhr:s})};this.settings.core.error.call(this,this._data.core.last_error)},this))}u=(e.isArray(v)||e.isPlainObject(v))?JSON.parse(JSON.stringify(v)):v;if(w.id==="#"){return this._append_json_data(w,u,function(s){x.call(this,s)})}else{this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:w.id})};this.settings.core.error.call(this,this._data.core.last_error);return x.call(this,false)}}if(typeof v==="string"){if(w.id==="#"){return this._append_html_data(w,e(v),function(s){x.call(this,s)})}else{this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:w.id})};this.settings.core.error.call(this,this._data.core.last_error);return x.call(this,false)}}return x.call(this,false)},_node_changed:function(s){s=this.get_node(s);if(s){this._model.changed.push(s.id)}},_append_html_data:function(x,A,v){x=this.get_node(x);x.children=[];x.children_d=[];var D=A.is("ul")?A.children():A,C=x.id,F=[],B=[],u=this._model.data,t=u[C],E=this._data.core.selected.length,z,y,w;D.each(e.proxy(function(G,s){z=this._parse_model_from_html(e(s),C,t.parents.concat());if(z){F.push(z);B.push(z);if(u[z].children_d.length){B=B.concat(u[z].children_d)}}},this));t.children=F;t.children_d=B;for(y=0,w=t.parents.length;y<w;y++){u[t.parents[y]].children_d=u[t.parents[y]].children_d.concat(B)}this.trigger("model",{nodes:B,parent:C});if(C!=="#"){this._node_changed(C);this.redraw()}else{this.get_container_ul().children(".jstree-initial-node").remove();this.redraw(true)}if(this._data.core.selected.length!==E){this.trigger("changed",{action:"model",selected:this._data.core.selected})}v.call(this,true)},_append_json_data:function(u,v,t,x){u=this.get_node(u);u.children=[];u.children_d=[];if(v.d){v=v.d;if(typeof v==="string"){v=JSON.parse(v)}}if(!e.isArray(v)){v=[v]}var B=null,z={df:this._model.default_state,dat:v,par:u.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(T,C){if(T.data){T=T.data}var O=T.dat,H=T.par,w=[],D=[],I=[],P=T.df,F=T.t_id,G=T.t_cnt,K=T.m,J=K[H],L=T.sel,R,N,M,Q,S=function(ab,V,U){if(!U){U=[]}else{U=U.concat()}if(V){U.unshift(V)}var W=ab.id.toString(),Z,X,ac,aa,Y={id:W,text:ab.text||"",icon:ab.icon!==C?ab.icon:true,parent:V,parents:U,children:ab.children||[],children_d:ab.children_d||[],data:ab.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(Z in P){if(P.hasOwnProperty(Z)){Y.state[Z]=P[Z]}}if(ab&&ab.data&&ab.data.jstree&&ab.data.jstree.icon){Y.icon=ab.data.jstree.icon}if(ab&&ab.data){Y.data=ab.data;if(ab.data.jstree){for(Z in ab.data.jstree){if(ab.data.jstree.hasOwnProperty(Z)){Y.state[Z]=ab.data.jstree[Z]}}}}if(ab&&typeof ab.state==="object"){for(Z in ab.state){if(ab.state.hasOwnProperty(Z)){Y.state[Z]=ab.state[Z]}}}if(ab&&typeof ab.li_attr==="object"){for(Z in ab.li_attr){if(ab.li_attr.hasOwnProperty(Z)){Y.li_attr[Z]=ab.li_attr[Z]}}}if(!Y.li_attr.id){Y.li_attr.id=W}if(ab&&typeof ab.a_attr==="object"){for(Z in ab.a_attr){if(ab.a_attr.hasOwnProperty(Z)){Y.a_attr[Z]=ab.a_attr[Z]}}}if(ab&&ab.children&&ab.children===true){Y.state.loaded=false;Y.children=[];Y.children_d=[]}K[Y.id]=Y;for(Z=0,X=Y.children.length;Z<X;Z++){ac=S(K[Y.children[Z]],Y.id,U);aa=K[ac];Y.children_d.push(ac);if(aa.children_d.length){Y.children_d=Y.children_d.concat(aa.children_d)}}delete ab.data;delete ab.children;K[Y.id].original=ab;if(Y.state.selected){I.push(Y.id)}return Y.id},E=function(ab,V,U){if(!U){U=[]}else{U=U.concat()}if(V){U.unshift(V)}var W=false,Z,X,ac,aa,Y;do{W="j"+F+"_"+(++G)}while(K[W]);Y={id:false,text:typeof ab==="string"?ab:"",icon:typeof ab==="object"&&ab.icon!==C?ab.icon:true,parent:V,parents:U,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(Z in P){if(P.hasOwnProperty(Z)){Y.state[Z]=P[Z]}}if(ab&&ab.id){Y.id=ab.id.toString()}if(ab&&ab.text){Y.text=ab.text}if(ab&&ab.data&&ab.data.jstree&&ab.data.jstree.icon){Y.icon=ab.data.jstree.icon}if(ab&&ab.data){Y.data=ab.data;if(ab.data.jstree){for(Z in ab.data.jstree){if(ab.data.jstree.hasOwnProperty(Z)){Y.state[Z]=ab.data.jstree[Z]}}}}if(ab&&typeof ab.state==="object"){for(Z in ab.state){if(ab.state.hasOwnProperty(Z)){Y.state[Z]=ab.state[Z]}}}if(ab&&typeof ab.li_attr==="object"){for(Z in ab.li_attr){if(ab.li_attr.hasOwnProperty(Z)){Y.li_attr[Z]=ab.li_attr[Z]}}}if(Y.li_attr.id&&!Y.id){Y.id=Y.li_attr.id.toString()}if(!Y.id){Y.id=W}if(!Y.li_attr.id){Y.li_attr.id=Y.id}if(ab&&typeof ab.a_attr==="object"){for(Z in ab.a_attr){if(ab.a_attr.hasOwnProperty(Z)){Y.a_attr[Z]=ab.a_attr[Z]}}}if(ab&&ab.children&&ab.children.length){for(Z=0,X=ab.children.length;Z<X;Z++){ac=E(ab.children[Z],Y.id,U);aa=K[ac];Y.children.push(ac);if(aa.children_d.length){Y.children_d=Y.children_d.concat(aa.children_d)}}Y.children_d=Y.children_d.concat(Y.children)}if(ab&&ab.children&&ab.children===true){Y.state.loaded=false;Y.children=[];Y.children_d=[]}delete ab.data;delete ab.children;Y.original=ab;K[Y.id]=Y;if(Y.state.selected){I.push(Y.id)}return Y.id};if(O.length&&O[0].id!==C&&O[0].parent!==C){for(N=0,M=O.length;N<M;N++){if(!O[N].children){O[N].children=[]}K[O[N].id.toString()]=O[N]}for(N=0,M=O.length;N<M;N++){K[O[N].parent.toString()].children.push(O[N].id.toString());J.children_d.push(O[N].id.toString())}for(N=0,M=J.children.length;N<M;N++){R=S(K[J.children[N]],H,J.parents.concat());D.push(R);if(K[R].children_d.length){D=D.concat(K[R].children_d)}}for(N=0,M=J.parents.length;N<M;N++){K[J.parents[N]].children_d=K[J.parents[N]].children_d.concat(D)}Q={cnt:G,mod:K,sel:L,par:H,dpc:D,add:I}}else{for(N=0,M=O.length;N<M;N++){R=E(O[N],H,J.parents.concat());if(R){w.push(R);D.push(R);if(K[R].children_d.length){D=D.concat(K[R].children_d)}}}J.children=w;J.children_d=D;for(N=0,M=J.parents.length;N<M;N++){K[J.parents[N]].children_d=K[J.parents[N]].children_d.concat(D)}Q={cnt:G,mod:K,sel:L,par:H,dpc:D,add:I}}if(typeof window==="undefined"||typeof window.document==="undefined"){postMessage(Q)}else{return Q}},A=function(D,I){this._cnt=D.cnt;this._model.data=D.mod;if(I){var F,E,C=D.add,H=D.sel,G=this._data.core.selected.slice(),w=this._model.data;if(H.length!==G.length||e.vakata.array_unique(H.concat(G)).length!==H.length){for(F=0,E=H.length;F<E;F++){if(e.inArray(H[F],C)===-1&&e.inArray(H[F],G)===-1){w[H[F]].state.selected=false}}for(F=0,E=G.length;F<E;F++){if(e.inArray(G[F],H)===-1){w[G[F]].state.selected=true}}}}if(D.add.length){this._data.core.selected=this._data.core.selected.concat(D.add)}this.trigger("model",{nodes:D.dpc,parent:D.par});if(D.par!=="#"){this._node_changed(D.par);this.redraw()}else{this.redraw(true)}if(D.add.length){this.trigger("changed",{action:"model",selected:this._data.core.selected})}t.call(this,true)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{if(this._wrk===null){this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))}if(!this._data.core.working||x){this._data.core.working=true;B=new window.Worker(this._wrk);B.onmessage=e.proxy(function(w){A.call(this,w.data,true);try{B.terminate();B=null}catch(C){}if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}},this);if(!z.par){if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}}else{B.postMessage(z)}}else{this._data.core.worker_queue.push([u,v,t,true])}}catch(y){A.call(this,s(z),false);if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}}}else{A.call(this,s(z),false)}},_parse_model_from_html:function(A,t,s){if(!s){s=[]}else{s=[].concat(s)}if(t){s.unshift(t)}var B,z,u=this._model.data,x={id:false,text:false,icon:true,parent:t,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false},y,w,v;for(y in this._model.default_state){if(this._model.default_state.hasOwnProperty(y)){x.state[y]=this._model.default_state[y]}}w=e.vakata.attributes(A,true);e.each(w,function(D,C){C=e.trim(C);if(!C.length){return true}x.li_attr[D]=C;if(D==="id"){x.id=C.toString()}});w=A.children("a").first();if(w.length){w=e.vakata.attributes(w,true);e.each(w,function(D,C){C=e.trim(C);if(C.length){x.a_attr[D]=C}})}w=A.children("a").first().length?A.children("a").first().clone():A.clone();w.children("ins, i, ul").remove();w=w.html();w=e("<div />").html(w);x.text=this.settings.core.force_text?w.text():w.html();w=A.data();x.data=w?e.extend(true,{},w):null;x.state.opened=A.hasClass("jstree-open");x.state.selected=A.children("a").hasClass("jstree-clicked");x.state.disabled=A.children("a").hasClass("jstree-disabled");if(x.data&&x.data.jstree){for(y in x.data.jstree){if(x.data.jstree.hasOwnProperty(y)){x.state[y]=x.data.jstree[y]}}}w=A.children("a").children(".jstree-themeicon");if(w.length){x.icon=w.hasClass("jstree-themeicon-hidden")?false:w.attr("rel")}if(x.state.icon){x.icon=x.state.icon}w=A.children("ul").children("li");do{v="j"+this._id+"_"+(++this._cnt)}while(u[v]);x.id=x.li_attr.id?x.li_attr.id.toString():v;if(w.length){w.each(e.proxy(function(D,C){B=this._parse_model_from_html(e(C),x.id,s);z=this._model.data[B];x.children.push(B);if(z.children_d.length){x.children_d=x.children_d.concat(z.children_d)}},this));x.children_d=x.children_d.concat(x.children)}else{if(A.hasClass("jstree-closed")){x.state.loaded=false}}if(x.li_attr["class"]){x.li_attr["class"]=x.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")}if(x.a_attr["class"]){x.a_attr["class"]=x.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")}u[x.id]=x;if(x.state.selected){this._data.core.selected.push(x.id)}return x.id},_parse_model_from_flat_json:function(A,t,s){if(!s){s=[]}else{s=s.concat()}if(t){s.unshift(t)}var v=A.id.toString(),u=this._model.data,C=this._model.default_state,y,w,B,z,x={id:v,text:A.text||"",icon:A.icon!==f?A.icon:true,parent:t,parents:s,children:A.children||[],children_d:A.children_d||[],data:A.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(y in C){if(C.hasOwnProperty(y)){x.state[y]=C[y]}}if(A&&A.data&&A.data.jstree&&A.data.jstree.icon){x.icon=A.data.jstree.icon}if(A&&A.data){x.data=A.data;if(A.data.jstree){for(y in A.data.jstree){if(A.data.jstree.hasOwnProperty(y)){x.state[y]=A.data.jstree[y]}}}}if(A&&typeof A.state==="object"){for(y in A.state){if(A.state.hasOwnProperty(y)){x.state[y]=A.state[y]}}}if(A&&typeof A.li_attr==="object"){for(y in A.li_attr){if(A.li_attr.hasOwnProperty(y)){x.li_attr[y]=A.li_attr[y]}}}if(!x.li_attr.id){x.li_attr.id=v}if(A&&typeof A.a_attr==="object"){for(y in A.a_attr){if(A.a_attr.hasOwnProperty(y)){x.a_attr[y]=A.a_attr[y]}}}if(A&&A.children&&A.children===true){x.state.loaded=false;x.children=[];x.children_d=[]}u[x.id]=x;for(y=0,w=x.children.length;y<w;y++){B=this._parse_model_from_flat_json(u[x.children[y]],x.id,s);z=u[B];x.children_d.push(B);if(z.children_d.length){x.children_d=x.children_d.concat(z.children_d)}}delete A.data;delete A.children;u[x.id].original=A;if(x.state.selected){this._data.core.selected.push(x.id)}return x.id},_parse_model_from_json:function(A,t,s){if(!s){s=[]}else{s=s.concat()}if(t){s.unshift(t)}var v=false,y,w,B,z,u=this._model.data,C=this._model.default_state,x;do{v="j"+this._id+"_"+(++this._cnt)}while(u[v]);x={id:false,text:typeof A==="string"?A:"",icon:typeof A==="object"&&A.icon!==f?A.icon:true,parent:t,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(y in C){if(C.hasOwnProperty(y)){x.state[y]=C[y]}}if(A&&A.id){x.id=A.id.toString()}if(A&&A.text){x.text=A.text}if(A&&A.data&&A.data.jstree&&A.data.jstree.icon){x.icon=A.data.jstree.icon}if(A&&A.data){x.data=A.data;if(A.data.jstree){for(y in A.data.jstree){if(A.data.jstree.hasOwnProperty(y)){x.state[y]=A.data.jstree[y]}}}}if(A&&typeof A.state==="object"){for(y in A.state){if(A.state.hasOwnProperty(y)){x.state[y]=A.state[y]}}}if(A&&typeof A.li_attr==="object"){for(y in A.li_attr){if(A.li_attr.hasOwnProperty(y)){x.li_attr[y]=A.li_attr[y]}}}if(x.li_attr.id&&!x.id){x.id=x.li_attr.id.toString()}if(!x.id){x.id=v}if(!x.li_attr.id){x.li_attr.id=x.id}if(A&&typeof A.a_attr==="object"){for(y in A.a_attr){if(A.a_attr.hasOwnProperty(y)){x.a_attr[y]=A.a_attr[y]}}}if(A&&A.children&&A.children.length){for(y=0,w=A.children.length;y<w;y++){B=this._parse_model_from_json(A.children[y],x.id,s);z=u[B];x.children.push(B);if(z.children_d.length){x.children_d=x.children_d.concat(z.children_d)}}x.children_d=x.children_d.concat(x.children)}if(A&&A.children&&A.children===true){x.state.loaded=false;x.children=[];x.children_d=[]}delete A.data;delete A.children;x.original=A;u[x.id]=x;if(x.state.selected){this._data.core.selected.push(x.id)}return x.id},_redraw:function(){var s=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),x=document.createElement("UL"),w,v,u,t=this._data.core.focused;for(v=0,u=s.length;v<u;v++){w=this.redraw_node(s[v],true,this._model.force_full_redraw);if(w&&this._model.force_full_redraw){x.appendChild(w)}}if(this._model.force_full_redraw){x.className=this.get_container_ul()[0].className;x.setAttribute("role","group");this.element.empty().append(x)}if(t!==null){w=this.get_node(t,true);if(w&&w.length&&w.children(".jstree-anchor")[0]!==document.activeElement){w.children(".jstree-anchor").focus()}else{this._data.core.focused=null}}this._model.force_full_redraw=false;this._model.changed=[];this.trigger("redraw",{nodes:s})},redraw:function(s){if(s){this._model.force_full_redraw=true}this._redraw()},draw_children:function(v){var w=this.get_node(v),u=false,t=false,s=false,x=document;if(!w){return false}if(w.id==="#"){return this.redraw(true)}v=this.get_node(v,true);if(!v||!v.length){return false}v.children(".jstree-children").remove();v=v[0];if(w.children.length&&w.state.loaded){s=x.createElement("UL");s.setAttribute("role","group");s.className="jstree-children";for(u=0,t=w.children.length;u<t;u++){s.appendChild(this.redraw_node(w.children[u],true,true))}v.appendChild(s)}},redraw_node:function(B,G,v,J){var x=this.get_node(B),A=false,w=false,u=false,H=false,F=false,E=false,L="",K=document,C=this._model.data,I=false,z=false,M=null,y=0,D=0;if(!x){return false}if(x.id==="#"){return this.redraw(true)}G=G||x.children.length===0;B=!document.querySelector?document.getElementById(x.id):this.element[0].querySelector("#"+("0123456789".indexOf(x.id[0])!==-1?"\\3"+x.id[0]+" "+x.id.substr(1).replace(e.jstree.idregex,"\\$&"):x.id.replace(e.jstree.idregex,"\\$&")));if(!B){G=true;if(!v){A=x.parent!=="#"?e("#"+x.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null;if(A!==null&&(!A||!C[x.parent].state.opened)){return false}w=e.inArray(x.id,A===null?C["#"].children:C[x.parent].children)}}else{B=e(B);if(!v){A=B.parent().parent()[0];if(A===this.element[0]){A=null}w=B.index()}if(!G&&x.children.length&&!B.children(".jstree-children").length){G=true}if(!G){u=B.children(".jstree-children")[0]}I=B.children(".jstree-anchor")[0]===document.activeElement;B.remove()}B=g.cloneNode(true);L="jstree-node ";for(H in x.li_attr){if(x.li_attr.hasOwnProperty(H)){if(H==="id"){continue}if(H!=="class"){B.setAttribute(H,x.li_attr[H])}else{L+=x.li_attr[H]}}}if(!x.a_attr.id){x.a_attr.id=x.id+"_anchor"}B.setAttribute("aria-selected",!!x.state.selected);B.setAttribute("aria-level",x.parents.length);B.setAttribute("aria-labelledby",x.a_attr.id);if(x.state.disabled){B.setAttribute("aria-disabled",true)}if(x.state.loaded&&!x.children.length){L+=" jstree-leaf"}else{L+=x.state.opened&&x.state.loaded?" jstree-open":" jstree-closed";B.setAttribute("aria-expanded",(x.state.opened&&x.state.loaded))}if(x.parent!==null&&C[x.parent].children[C[x.parent].children.length-1]===x.id){L+=" jstree-last"}B.id=x.id;B.className=L;L=(x.state.selected?" jstree-clicked":"")+(x.state.disabled?" jstree-disabled":"");for(F in x.a_attr){if(x.a_attr.hasOwnProperty(F)){if(F==="href"&&x.a_attr[F]==="#"){continue}if(F!=="class"){B.childNodes[1].setAttribute(F,x.a_attr[F])}else{L+=" "+x.a_attr[F]}}}if(L.length){B.childNodes[1].className="jstree-anchor "+L}if((x.icon&&x.icon!==true)||x.icon===false){if(x.icon===false){B.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden"}else{if(x.icon.indexOf("/")===-1&&x.icon.indexOf(".")===-1){B.childNodes[1].childNodes[0].className+=" "+x.icon+" jstree-themeicon-custom"}else{B.childNodes[1].childNodes[0].style.backgroundImage="url("+x.icon+")";B.childNodes[1].childNodes[0].style.backgroundPosition="center center";B.childNodes[1].childNodes[0].style.backgroundSize="auto";B.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom"}}}if(this.settings.core.force_text){B.childNodes[1].appendChild(K.createTextNode(x.text))}else{B.childNodes[1].innerHTML+=x.text}if(G&&x.children.length&&(x.state.opened||J)&&x.state.loaded){E=K.createElement("UL");E.setAttribute("role","group");E.className="jstree-children";for(H=0,F=x.children.length;H<F;H++){E.appendChild(this.redraw_node(x.children[H],G,true))}B.appendChild(E)}if(u){B.appendChild(u)}if(!v){if(!A){A=this.element[0]}for(H=0,F=A.childNodes.length;H<F;H++){if(A.childNodes[H]&&A.childNodes[H].className&&A.childNodes[H].className.indexOf("jstree-children")!==-1){M=A.childNodes[H];break}}if(!M){M=K.createElement("UL");M.setAttribute("role","group");M.className="jstree-children";A.appendChild(M)}A=M;if(w<A.childNodes.length){A.insertBefore(B,A.childNodes[w])}else{A.appendChild(B)}if(I){y=this.element[0].scrollTop;D=this.element[0].scrollLeft;B.childNodes[1].focus();this.element[0].scrollTop=y;this.element[0].scrollLeft=D}}if(x.state.opened&&!x.state.loaded){x.state.opened=false;setTimeout(e.proxy(function(){this.open_node(x.id,false,0)},this),0)}return B},open_node:function(x,z,w){var v,u,y,s;if(e.isArray(x)){x=x.slice();for(v=0,u=x.length;v<u;v++){this.open_node(x[v],z,w)}return true}x=this.get_node(x);if(!x||x.id==="#"){return false}w=w===f?this.settings.core.animation:w;if(!this.is_closed(x)){if(z){z.call(this,x,false)}return false}if(!this.is_loaded(x)){if(this.is_loading(x)){return setTimeout(e.proxy(function(){this.open_node(x,z,w)},this),500)}this.load_node(x,function(A,t){return t?this.open_node(A,z,w):(z?z.call(this,A,false):false)})}else{y=this.get_node(x,true);s=this;if(y.length){if(w&&y.children(".jstree-children").length){y.children(".jstree-children").stop(true,true)}if(x.children.length&&!this._firstChild(y.children(".jstree-children")[0])){this.draw_children(x)}if(!w){this.trigger("before_open",{node:x});y[0].className=y[0].className.replace("jstree-closed","jstree-open");y[0].setAttribute("aria-expanded",true)}else{this.trigger("before_open",{node:x});y.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",true).children(".jstree-children").stop(true,true).slideDown(w,function(){this.style.display="";s.trigger("after_open",{node:x})})}}x.state.opened=true;if(z){z.call(this,x,true)}if(!y.length){this.trigger("before_open",{node:x})}this.trigger("open_node",{node:x});if(!w||!y.length){this.trigger("after_open",{node:x})}}},_open_to:function(v){v=this.get_node(v);if(!v||v.id==="#"){return false}var t,s,u=v.parents;for(t=0,s=u.length;t<s;t+=1){if(t!=="#"){this.open_node(u[t],false,0)}}return e("#"+v.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(x,w){var v,u,s,y;if(e.isArray(x)){x=x.slice();for(v=0,u=x.length;v<u;v++){this.close_node(x[v],w)}return true}x=this.get_node(x);if(!x||x.id==="#"){return false}if(this.is_closed(x)){return false}w=w===f?this.settings.core.animation:w;s=this;y=this.get_node(x,true);if(y.length){if(!w){y[0].className=y[0].className.replace("jstree-open","jstree-closed");y.attr("aria-expanded",false).children(".jstree-children").remove()}else{y.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",false).children(".jstree-children").stop(true,true).slideUp(w,function(){this.style.display="";y.children(".jstree-children").remove();s.trigger("after_close",{node:x})})}}x.state.opened=false;this.trigger("close_node",{node:x});if(!w||!y.length){this.trigger("after_close",{node:x})}},toggle_node:function(u){var t,s;if(e.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.toggle_node(u[t])}return true}if(this.is_closed(u)){return this.open_node(u)}if(this.is_open(u)){return this.close_node(u)}},open_all:function(w,v,s){if(!w){w="#"}w=this.get_node(w);if(!w){return false}var x=w.id==="#"?this.get_container_ul():this.get_node(w,true),u,t,y;if(!x.length){for(u=0,t=w.children_d.length;u<t;u++){if(this.is_closed(this._model.data[w.children_d[u]])){this._model.data[w.children_d[u]].state.opened=true}}return this.trigger("open_all",{node:w})}s=s||x;y=this;x=this.is_closed(w)?x.find(".jstree-closed").addBack():x.find(".jstree-closed");x.each(function(){y.open_node(this,function(A,z){if(z&&this.is_parent(A)){this.open_all(A,v,s)}},v||0)});if(s.find(".jstree-closed").length===0){this.trigger("open_all",{node:this.get_node(s)})}},close_all:function(v,u){if(!v){v="#"}v=this.get_node(v);if(!v){return false}var w=v.id==="#"?this.get_container_ul():this.get_node(v,true),x=this,t,s;if(!w.length){for(t=0,s=v.children_d.length;t<s;t++){this._model.data[v.children_d[t]].state.opened=false}return this.trigger("close_all",{node:v})}w=this.is_open(v)?w.find(".jstree-open").addBack():w.find(".jstree-open");e(w.get().reverse()).each(function(){x.close_node(this,u||0)});this.trigger("close_all",{node:v})},is_disabled:function(s){s=this.get_node(s);return s&&s.state&&s.state.disabled},enable_node:function(u){var t,s;if(e.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.enable_node(u[t])}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}u.state.disabled=false;this.get_node(u,true).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",false);this.trigger("enable_node",{node:u})},disable_node:function(u){var t,s;if(e.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.disable_node(u[t])}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}u.state.disabled=true;this.get_node(u,true).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",true);this.trigger("disable_node",{node:u})},activate_node:function(x,w){if(this.is_disabled(x)){return false}this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==f?this.get_node(this._data.core.last_clicked.id):null;if(this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected){this._data.core.last_clicked=null}if(!this._data.core.last_clicked&&this._data.core.selected.length){this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])}if(!this.settings.core.multiple||(!w.metaKey&&!w.ctrlKey&&!w.shiftKey)||(w.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(x)||this.get_parent(x)!==this._data.core.last_clicked.parent))){if(!this.settings.core.multiple&&(w.metaKey||w.ctrlKey||w.shiftKey)&&this.is_selected(x)){this.deselect_node(x,false,w)}else{this.deselect_all(true);this.select_node(x,false,false,w);this._data.core.last_clicked=this.get_node(x)}}else{if(w.shiftKey){var y=this.get_node(x).id,s=this._data.core.last_clicked.id,v=this.get_node(this._data.core.last_clicked.parent).children,z=false,u,t;for(u=0,t=v.length;u<t;u+=1){if(v[u]===y){z=!z}if(v[u]===s){z=!z}if(z||v[u]===y||v[u]===s){this.select_node(v[u],true,false,w)}else{this.deselect_node(v[u],true,w)}}this.trigger("changed",{action:"select_node",node:this.get_node(x),selected:this._data.core.selected,event:w})}else{if(!this.is_selected(x)){this.select_node(x,false,false,w)}else{this.deselect_node(x,false,w)}}}this.trigger("activate_node",{node:this.get_node(x)})},hover_node:function(u){u=this.get_node(u,true);if(!u||!u.length||u.children(".jstree-hovered").length){return false}var v=this.element.find(".jstree-hovered"),s=this.element;if(v&&v.length){this.dehover_node(v)}u.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(u)});setTimeout(function(){s.attr("aria-activedescendant",u[0].id)},0)},dehover_node:function(s){s=this.get_node(s,true);if(!s||!s.length||!s.children(".jstree-hovered").length){return false}s.children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(s)})},select_node:function(x,z,s,w){var y,v,t,u;if(e.isArray(x)){x=x.slice();for(v=0,t=x.length;v<t;v++){this.select_node(x[v],z,s,w)}return true}x=this.get_node(x);if(!x||x.id==="#"){return false}y=this.get_node(x,true);if(!x.state.selected){x.state.selected=true;this._data.core.selected.push(x.id);if(!s){y=this._open_to(x)}if(y&&y.length){y.attr("aria-selected",true).children(".jstree-anchor").addClass("jstree-clicked")}this.trigger("select_node",{node:x,selected:this._data.core.selected,event:w});if(!z){this.trigger("changed",{action:"select_node",node:x,selected:this._data.core.selected,event:w})}}},deselect_node:function(v,x,u){var t,s,w;if(e.isArray(v)){v=v.slice();for(t=0,s=v.length;t<s;t++){this.deselect_node(v[t],x,u)}return true}v=this.get_node(v);if(!v||v.id==="#"){return false}w=this.get_node(v,true);if(v.state.selected){v.state.selected=false;this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,v.id);if(w.length){w.attr("aria-selected",false).children(".jstree-anchor").removeClass("jstree-clicked")}this.trigger("deselect_node",{node:v,selected:this._data.core.selected,event:u});if(!x){this.trigger("changed",{action:"deselect_node",node:v,selected:this._data.core.selected,event:u})}}},select_all:function(v){var u=this._data.core.selected.concat([]),t,s;this._data.core.selected=this._model.data["#"].children_d.concat();for(t=0,s=this._data.core.selected.length;t<s;t++){if(this._model.data[this._data.core.selected[t]]){this._model.data[this._data.core.selected[t]].state.selected=true}}this.redraw(true);this.trigger("select_all",{selected:this._data.core.selected});if(!v){this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:u})}},deselect_all:function(v){var u=this._data.core.selected.concat([]),t,s;for(t=0,s=this._data.core.selected.length;t<s;t++){if(this._model.data[this._data.core.selected[t]]){this._model.data[this._data.core.selected[t]].state.selected=false}}this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",false);this.trigger("deselect_all",{selected:this._data.core.selected,node:u});if(!v){this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:u})}},is_selected:function(s){s=this.get_node(s);if(!s||s.id==="#"){return false}return s.state.selected},get_selected:function(s){return s?e.map(this._data.core.selected,e.proxy(function(t){return this.get_node(t)},this)):this._data.core.selected.slice()},get_top_selected:function(x){var w=this.get_selected(true),y={},v,u,t,s;for(v=0,u=w.length;v<u;v++){y[w[v].id]=w[v]}for(v=0,u=w.length;v<u;v++){for(t=0,s=w[v].children_d.length;t<s;t++){if(y[w[v].children_d[t]]){delete y[w[v].children_d[t]]}}}w=[];for(v in y){if(y.hasOwnProperty(v)){w.push(v)}}return x?e.map(w,e.proxy(function(z){return this.get_node(z)},this)):w},get_bottom_selected:function(v){var u=this.get_selected(true),w=[],t,s;for(t=0,s=u.length;t<s;t++){if(!u[t].children.length){w.push(u[t].id)}}return v?e.map(w,e.proxy(function(x){return this.get_node(x)},this)):w},get_state:function(){var t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},
/*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}},s;for(s in this._model.data){if(this._model.data.hasOwnProperty(s)){if(s!=="#"){if(this._model.data[s].state.opened){t.core.open.push(s)}if(this._model.data[s].state.selected){t.core.selected.push(s)}}}}return t},set_state:function(v,y){if(v){if(v.core){var u,x,s,w;if(v.core.open){if(!e.isArray(v.core.open)){delete v.core.open;this.set_state(v,y);return false}u=true;x=false;s=this;e.each(v.core.open.concat([]),function(z,t){x=s.get_node(t);if(x){if(s.is_loaded(t)){if(s.is_closed(t)){s.open_node(t,false,0)}if(v&&v.core&&v.core.open){e.vakata.array_remove_item(v.core.open,t)}}else{if(!s.is_loading(t)){s.open_node(t,e.proxy(function(B,A){if(!A&&v&&v.core&&v.core.open){e.vakata.array_remove_item(v.core.open,B.id)}this.set_state(v,y)},s),0)}u=false}}});if(u){delete v.core.open;this.set_state(v,y)}return false}if(v.core.scroll){if(v.core.scroll&&v.core.scroll.left!==f){this.element.scrollLeft(v.core.scroll.left)}if(v.core.scroll&&v.core.scroll.top!==f){this.element.scrollTop(v.core.scroll.top)}delete v.core.scroll;this.set_state(v,y);return false;
/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/
}if(v.core.selected){w=this;this.deselect_all();e.each(v.core.selected,function(z,t){w.select_node(t)});delete v.core.selected;this.set_state(v,y);return false}if(e.isEmptyObject(v.core)){delete v.core;this.set_state(v,y);return false}}if(e.isEmptyObject(v)){v=null;if(y){y.call(this)}this.trigger("set_state");return false}return true}return false},refresh:function(t,s){this._data.core.state=s===true?{}:this.get_state();if(s&&e.isFunction(s)){this._data.core.state=s.call(this,this._data.core.state)}this._cnt=0;this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:false}}};var u=this.get_container_ul()[0].className;if(!t){this.element.html("<ul class='"+u+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading")}this.load_node("#",function(w,v){if(v){this.get_container_ul()[0].className=u;if(this._firstChild(this.get_container_ul()[0])){this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id)}this.set_state(e.extend(true,{},this._data.core.state),function(){this.trigger("refresh")})}this._data.core.state=null})},refresh_node:function(v){v=this.get_node(v);if(!v||v.id==="#"){return false}var w=[],t=[],u=this._data.core.selected.concat([]);t.push(v.id);if(v.state.opened===true){w.push(v.id)}this.get_node(v,true).find(".jstree-open").each(function(){w.push(this.id)});this._load_nodes(t,e.proxy(function(s){this.open_node(w,false,0);this.select_node(this._data.core.selected);this.trigger("refresh_node",{node:v,nodes:s})},this))},set_id:function(v,w){v=this.get_node(v);if(!v||v.id==="#"){return false}var u,t,s=this._model.data;w=w.toString();s[v.parent].children[e.inArray(v.id,s[v.parent].children)]=w;for(u=0,t=v.parents.length;u<t;u++){s[v.parents[u]].children_d[e.inArray(v.id,s[v.parents[u]].children_d)]=w}for(u=0,t=v.children.length;u<t;u++){s[v.children[u]].parent=w}for(u=0,t=v.children_d.length;u<t;u++){s[v.children_d[u]].parents[e.inArray(v.id,s[v.children_d[u]].parents)]=w}u=e.inArray(v.id,this._data.core.selected);if(u!==-1){this._data.core.selected[u]=w}u=this.get_node(v.id,true);if(u){u.attr("id",w)}delete s[v.id];v.id=w;s[w]=v;return true},get_text:function(s){s=this.get_node(s);return(!s||s.id==="#")?false:s.text},set_text:function(u,v){var t,s;if(e.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.set_text(u[t],v)}return true}u=this.get_node(u);if(!u||u.id==="#"){return false}u.text=v;if(this.get_node(u,true).length){this.redraw_node(u.id)}this.trigger("set_text",{obj:u,text:v});return true},get_json:function(w,t,x){w=this.get_node(w||"#");if(!w){return false}if(t&&t.flat&&!x){x=[]}var v={id:w.id,text:w.text,icon:this.get_icon(w),li_attr:e.extend(true,{},w.li_attr),a_attr:e.extend(true,{},w.a_attr),state:{},data:t&&t.no_data?false:e.extend(true,{},w.data)},u,s;if(t&&t.flat){v.parent=w.parent}else{v.children=[]}if(!t||!t.no_state){for(u in w.state){if(w.state.hasOwnProperty(u)){v.state[u]=w.state[u]}}}if(t&&t.no_id){delete v.id;if(v.li_attr&&v.li_attr.id){delete v.li_attr.id}if(v.a_attr&&v.a_attr.id){delete v.a_attr.id}}if(t&&t.flat&&w.id!=="#"){x.push(v)}if(!t||!t.no_children){for(u=0,s=w.children.length;u<s;u++){if(t&&t.flat){this.get_json(w.children[u],t,x)}else{v.children.push(this.get_json(w.children[u],t))}}}return t&&t.flat?x:(w.id==="#"?v.children:v)},create_node:function(x,s,z,A,y){if(x===null){x="#"}x=this.get_node(x);if(!x){return false}z=z===f?"last":z;if(!z.toString().match(/^(before|after)$/)&&!y&&!this.is_loaded(x)){return this.load_node(x,function(){this.create_node(x,s,z,A,true)})}if(!s){s={text:this.get_string("New node")}}if(typeof s==="string"){s={text:s}}if(s.text===f){s.text=this.get_string("New node")}var u,w,v,t;if(x.id==="#"){if(z==="before"){z="first"}if(z==="after"){z="last"}}switch(z){case"before":u=this.get_node(x.parent);z=e.inArray(x.id,u.children);x=u;break;case"after":u=this.get_node(x.parent);z=e.inArray(x.id,u.children)+1;x=u;break;case"inside":case"first":z=0;break;case"last":z=x.children.length;break;default:if(!z){z=0}break}if(z>x.children.length){z=x.children.length}if(!s.id){s.id=true}if(!this.check("create_node",s,x,z)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(s.id===true){delete s.id}s=this._parse_model_from_json(s,x.id,x.parents.concat());if(!s){return false}u=this.get_node(s);w=[];w.push(s);w=w.concat(u.children_d);this.trigger("model",{nodes:w,parent:x.id});x.children_d=x.children_d.concat(w);for(v=0,t=x.parents.length;v<t;v++){this._model.data[x.parents[v]].children_d=this._model.data[x.parents[v]].children_d.concat(w)}s=u;u=[];for(v=0,t=x.children.length;v<t;v++){u[v>=z?v+1:v]=x.children[v]}u[z]=s.id;x.children=u;this.redraw_node(x,true);if(A){A.call(this,this.get_node(s))}this.trigger("create_node",{node:this.get_node(s),parent:x.id,position:z});return s.id},rename_node:function(v,w){var u,t,s;if(e.isArray(v)){v=v.slice();for(u=0,t=v.length;u<t;u++){this.rename_node(v[u],w)}return true}v=this.get_node(v);if(!v||v.id==="#"){return false}s=v.text;if(!this.check("rename_node",v,this.get_parent(v),w)){this.settings.core.error.call(this,this._data.core.last_error);return false}this.set_text(v,w);this.trigger("rename_node",{node:v,text:w,old:s});return true},delete_node:function(v){var z,y,A,C,w,x,u,t,s,B;if(e.isArray(v)){v=v.slice();for(z=0,y=v.length;z<y;z++){this.delete_node(v[z])}return true}v=this.get_node(v);if(!v||v.id==="#"){return false}A=this.get_node(v.parent);C=e.inArray(v.id,A.children);B=false;if(!this.check("delete_node",v,A,C)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(C!==-1){A.children=e.vakata.array_remove(A.children,C)}w=v.children_d.concat([]);w.push(v.id);for(t=0,s=w.length;t<s;t++){for(x=0,u=v.parents.length;x<u;x++){C=e.inArray(w[t],this._model.data[v.parents[x]].children_d);if(C!==-1){this._model.data[v.parents[x]].children_d=e.vakata.array_remove(this._model.data[v.parents[x]].children_d,C)}}if(this._model.data[w[t]].state.selected){B=true;C=e.inArray(w[t],this._data.core.selected);if(C!==-1){this._data.core.selected=e.vakata.array_remove(this._data.core.selected,C)}}}this.trigger("delete_node",{node:v,parent:A.id});if(B){this.trigger("changed",{action:"delete_node",node:v,selected:this._data.core.selected,parent:A.id})}for(t=0,s=w.length;t<s;t++){delete this._model.data[w[t]]}this.redraw_node(A,true);return true},check:function(s,w,v,y,u){w=w&&w.id?w:this.get_node(w);v=v&&v.id?v:this.get_node(v);var t=s.match(/^move_node|copy_node|create_node$/i)?v:w,x=this.settings.core.check_callback;if(s==="move_node"||s==="copy_node"){if((!u||!u.is_multi)&&(w.id===v.id||e.inArray(w.id,v.children)===y||e.inArray(v.id,w.children_d)!==-1)){this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:s,pos:y,obj:w&&w.id?w.id:false,par:v&&v.id?v.id:false})};return false}}if(t&&t.data){t=t.data}if(t&&t.functions&&(t.functions[s]===false||t.functions[s]===true)){if(t.functions[s]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+s,data:JSON.stringify({chk:s,pos:y,obj:w&&w.id?w.id:false,par:v&&v.id?v.id:false})}}return t.functions[s]}if(x===false||(e.isFunction(x)&&x.call(this,s,w,v,y,u)===false)||(x&&x[s]===false)){this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+s,data:JSON.stringify({chk:s,pos:y,obj:w&&w.id?w.id:false,par:v&&v.id?v.id:false})};return false}return true},last_error:function(){return this._data.core.last_error},move_node:function(A,C,v,t,B,I){var y,x,z,s,K,L,u,w,J,H,G,F,E,D;C=this.get_node(C);v=v===f?0:v;if(!C){return false}if(!v.toString().match(/^(before|after)$/)&&!B&&!this.is_loaded(C)){return this.load_node(C,function(){this.move_node(A,C,v,t,true)})}if(e.isArray(A)){A=A.slice();for(y=0,x=A.length;y<x;y++){if(this.move_node(A[y],C,v,t,B,true)){C=A[y];v="after"}}this.redraw();return true}A=A&&A.id?A:this.get_node(A);if(!A||A.id==="#"){return false}z=(A.parent||"#").toString();K=(!v.toString().match(/^(before|after)$/)||C.id==="#")?C:this.get_node(C.parent);L=A.instance?A.instance:(this._model.data[A.id]?this:e.jstree.reference(A.id));u=!L||!L._id||(this._id!==L._id);s=L&&L._id&&z&&L._model.data[z]&&L._model.data[z].children?e.inArray(A.id,L._model.data[z].children):-1;if(u){if(this.copy_node(A,C,v,t,B)){if(L){L.delete_node(A)}return true}return false}if(C.id==="#"){if(v==="before"){v="first"}if(v==="after"){v="last"}}switch(v){case"before":v=e.inArray(C.id,K.children);break;case"after":v=e.inArray(C.id,K.children)+1;break;case"inside":case"first":v=0;break;case"last":v=K.children.length;break;default:if(!v){v=0}break}if(v>K.children.length){v=K.children.length}if(!this.check("move_node",A,K,v,{core:true,is_multi:(L&&L._id&&L._id!==this._id),is_foreign:(!L||!L._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false}if(A.parent===K.id){w=K.children.concat();J=e.inArray(A.id,w);if(J!==-1){w=e.vakata.array_remove(w,J);if(v>J){v--}}J=[];for(H=0,G=w.length;H<G;H++){J[H>=v?H+1:H]=w[H]}J[v]=A.id;K.children=J;this._node_changed(K.id);this.redraw(K.id==="#")}else{J=A.children_d.concat();J.push(A.id);for(H=0,G=A.parents.length;H<G;H++){w=[];D=L._model.data[A.parents[H]].children_d;for(F=0,E=D.length;F<E;F++){if(e.inArray(D[F],J)===-1){w.push(D[F])}}L._model.data[A.parents[H]].children_d=w}L._model.data[z].children=e.vakata.array_remove_item(L._model.data[z].children,A.id);for(H=0,G=K.parents.length;H<G;H++){this._model.data[K.parents[H]].children_d=this._model.data[K.parents[H]].children_d.concat(J)}w=[];for(H=0,G=K.children.length;H<G;H++){w[H>=v?H+1:H]=K.children[H]}w[v]=A.id;K.children=w;K.children_d.push(A.id);K.children_d=K.children_d.concat(A.children_d);A.parent=K.id;J=K.parents.concat();J.unshift(K.id);D=A.parents.length;A.parents=J;J=J.concat();for(H=0,G=A.children_d.length;H<G;H++){this._model.data[A.children_d[H]].parents=this._model.data[A.children_d[H]].parents.slice(0,D*-1);Array.prototype.push.apply(this._model.data[A.children_d[H]].parents,J)}if(z==="#"||K.id==="#"){this._model.force_full_redraw=true}if(!this._model.force_full_redraw){this._node_changed(z);this._node_changed(K.id)}if(!I){this.redraw()}}if(t){t.call(this,A,K,v)}this.trigger("move_node",{node:A,parent:K.id,position:v,old_parent:z,old_position:s,is_multi:(L&&L._id&&L._id!==this._id),is_foreign:(!L||!L._id),old_instance:L,new_instance:this});return true},copy_node:function(y,E,G,I,F,H){var C,B,A,x,w,v,t,D,s,z,u;E=this.get_node(E);G=G===f?0:G;if(!E){return false}if(!G.toString().match(/^(before|after)$/)&&!F&&!this.is_loaded(E)){return this.load_node(E,function(){this.copy_node(y,E,G,I,true)})}if(e.isArray(y)){y=y.slice();for(C=0,B=y.length;C<B;C++){x=this.copy_node(y[C],E,G,I,F,true);if(x){E=x;G="after"}}this.redraw();return true}y=y&&y.id?y:this.get_node(y);if(!y||y.id==="#"){return false}D=(y.parent||"#").toString();s=(!G.toString().match(/^(before|after)$/)||E.id==="#")?E:this.get_node(E.parent);z=y.instance?y.instance:(this._model.data[y.id]?this:e.jstree.reference(y.id));u=!z||!z._id||(this._id!==z._id);if(E.id==="#"){if(G==="before"){G="first"}if(G==="after"){G="last"}}switch(G){case"before":G=e.inArray(E.id,s.children);break;case"after":G=e.inArray(E.id,s.children)+1;break;case"inside":case"first":G=0;break;case"last":G=s.children.length;break;default:if(!G){G=0}break}if(G>s.children.length){G=s.children.length}if(!this.check("copy_node",y,s,G,{core:true,is_multi:(z&&z._id&&z._id!==this._id),is_foreign:(!z||!z._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false}t=z?z.get_json(y,{no_id:true,no_data:true,no_state:true}):y;if(!t){return false}if(t.id===true){delete t.id}t=this._parse_model_from_json(t,s.id,s.parents.concat());if(!t){return false}x=this.get_node(t);if(y&&y.state&&y.state.loaded===false){x.state.loaded=false}A=[];A.push(t);A=A.concat(x.children_d);this.trigger("model",{nodes:A,parent:s.id});for(w=0,v=s.parents.length;w<v;w++){this._model.data[s.parents[w]].children_d=this._model.data[s.parents[w]].children_d.concat(A)}A=[];for(w=0,v=s.children.length;w<v;w++){A[w>=G?w+1:w]=s.children[w]}A[G]=x.id;s.children=A;s.children_d.push(x.id);s.children_d=s.children_d.concat(x.children_d);if(s.id==="#"){this._model.force_full_redraw=true}if(!this._model.force_full_redraw){this._node_changed(s.id)}if(!H){this.redraw(s.id==="#")}if(I){I.call(this,x,s,G)}this.trigger("copy_node",{node:x,original:y,parent:s.id,position:G,old_parent:D,old_position:z&&z._id&&D&&z._model.data[D]&&z._model.data[D].children?e.inArray(y.id,z._model.data[D].children):-1,is_multi:(z&&z._id&&z._id!==this._id),is_foreign:(!z||!z._id),old_instance:z,new_instance:this});return x.id},cut:function(v){if(!v){v=this._data.core.selected.concat()}if(!e.isArray(v)){v=[v]}if(!v.length){return false}var s=[],w,u,t;for(u=0,t=v.length;u<t;u++){w=this.get_node(v[u]);if(w&&w.id&&w.id!=="#"){s.push(w)}}if(!s.length){return false}b=s;l=this;r="move_node";this.trigger("cut",{node:v})},copy:function(v){if(!v){v=this._data.core.selected.concat()}if(!e.isArray(v)){v=[v]}if(!v.length){return false}var s=[],w,u,t;for(u=0,t=v.length;u<t;u++){w=this.get_node(v[u]);if(w&&w.id&&w.id!=="#"){s.push(w)}}if(!s.length){return false}b=s;l=this;r="copy_node";this.trigger("copy",{node:v})},get_buffer:function(){return{mode:r,node:b,inst:l}},can_paste:function(){return r!==false&&b!==false},paste:function(s,t){s=this.get_node(s);if(!s||!r||!r.match(/^(copy_node|move_node)$/)||!b){return false}if(this[r](b,s,t)){this.trigger("paste",{parent:s.id,node:b,mode:r})}b=false;r=false;l=false},clear_buffer:function(){b=false;r=false;l=false;this.trigger("clear_buffer")},edit:function(u,A){u=this.get_node(u);if(!u){return false}if(this.settings.core.check_callback===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"};this.settings.core.error.call(this,this._data.core.last_error);return false}A=typeof A==="string"?A:u.text;this.set_text(u,"");u=this._open_to(u);var z=this._data.core.rtl,C=this.element.width(),B=u.children(".jstree-anchor"),E=e("<span>")
/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
,D=A,x=e("<div />",{css:{position:"absolute",top:"-200px",left:(z?"0px":"-1000px"),visibility:"hidden"}}).appendTo("body"),v=e("<input />",{value:D,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:(this._data.core.li_height)+"px",lineHeight:(this._data.core.li_height)+"px",width:"150px"},blur:e.proxy(function(){var t=E.children(".jstree-rename-input"),s=t.val();if(s===""){s=D}x.remove();E.replaceWith(B);E.remove();this.set_text(u,D);if(this.rename_node(u,e("<div></div>").text(s)[this.settings.core.force_text?"text":"html"]())===false){this.set_text(u,D)}},this),keydown:function(t){var s=t.which;if(s===27){this.value=D}if(s===27||s===13||s===37||s===38||s===39||s===40||s===32){t.stopImmediatePropagation()}if(s===27||s===13){t.preventDefault();this.blur()}},click:function(s){s.stopImmediatePropagation()},mousedown:function(s){s.stopImmediatePropagation()},keyup:function(s){v.width(Math.min(x.text("pW"+this.value).width(),C))},keypress:function(s){if(s.which===13){return false}}}),y={fontFamily:B.css("fontFamily")||"",fontSize:B.css("fontSize")||"",fontWeight:B.css("fontWeight")||"",fontStyle:B.css("fontStyle")||"",fontStretch:B.css("fontStretch")||"",fontVariant:B.css("fontVariant")||"",letterSpacing:B.css("letterSpacing")||"",wordSpacing:B.css("wordSpacing")||""};E.attr("class",B.attr("class")).append(B.contents().clone()).append(v);B.replaceWith(E);x.css(y);v.css(y).width(Math.min(x.text("pW"+v[0].value).width(),C))[0].select()},set_theme:function(u,s){if(!u){return false}if(s===true){var t=this.settings.core.themes.dir;if(!t){t=e.jstree.path+"/themes"}s=t+"/"+u+"/style.css"}if(s&&e.inArray(s,n)===-1){e("head").append('<link rel="stylesheet" href="'+s+'" type="text/css" />');n.push(s)}if(this._data.core.themes.name){this.element.removeClass("jstree-"+this._data.core.themes.name)}this._data.core.themes.name=u;this.element.addClass("jstree-"+u);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+u+"-responsive");this.trigger("set_theme",{theme:u})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(s){if(this._data.core.themes.variant){this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}this._data.core.themes.variant=s;if(s){this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=true;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=false;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){if(this._data.core.themes.stripes){this.hide_stripes()}else{this.show_stripes()}},show_dots:function(){this._data.core.themes.dots=true;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=false;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){if(this._data.core.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this._data.core.themes.icons=true;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=false;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){if(this._data.core.themes.icons){this.hide_icons()}else{this.show_icons()}},set_icon:function(w,u){var v,t,x,s;if(e.isArray(w)){w=w.slice();for(v=0,t=w.length;v<t;v++){this.set_icon(w[v],u)}return true}w=this.get_node(w);if(!w||w.id==="#"){return false}s=w.icon;w.icon=u;x=this.get_node(w,true).children(".jstree-anchor").children(".jstree-themeicon");if(u===false){this.hide_icon(w)}else{if(u===true){x.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel");if(s===false){this.show_icon(w)}}else{if(u.indexOf("/")===-1&&u.indexOf(".")===-1){x.removeClass(s).css("background","");x.addClass(u+" jstree-themeicon-custom").attr("rel",u);if(s===false){this.show_icon(w)}}else{x.removeClass(s).css("background","");x.addClass("jstree-themeicon-custom").css("background","url('"+u+"') center center no-repeat").attr("rel",u);if(s===false){this.show_icon(w)}}}}return true},get_icon:function(s){s=this.get_node(s);return(!s||s.id==="#")?false:s.icon},hide_icon:function(u){var t,s;if(e.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.hide_icon(u[t])}return true}u=this.get_node(u);if(!u||u==="#"){return false}u.icon=false;this.get_node(u,true).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden");return true},show_icon:function(u){var t,s,v;if(e.isArray(u)){u=u.slice();for(t=0,s=u.length;t<s;t++){this.show_icon(u[t])}return true}u=this.get_node(u);if(!u||u==="#"){return false}v=this.get_node(u,true);u.icon=v.length?v.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):true;if(!u.icon){u.icon=true}v.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden");return true}};e.vakata={};e.vakata.attributes=function(t,u){t=e(t)[0];var s=u?{}:[];if(t&&t.attributes){e.each(t.attributes,function(x,w){if(e.inArray(w.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1){return}if(w.value!==null&&e.trim(w.value)!==""){if(u){s[w.name]=w.value}else{s.push(w.name)}}})}return s};e.vakata.array_unique=function(w){var t=[],v,u,s;for(v=0,s=w.length;v<s;v++){for(u=0;u<=v;u++){if(w[v]===w[u]){break}}if(u===v){t.push(w[v])}}return t};e.vakata.array_remove=function(v,u,t){var s=v.slice((t||u)+1||v.length);v.length=u<0?v.length+u:u;v.push.apply(v,s);return v};e.vakata.array_remove_item=function(u,t){var s=e.inArray(t,u);return s!==-1?e.vakata.array_remove(u,s):u};var a=document.createElement("I");a.className="jstree-icon jstree-checkbox";a.setAttribute("role","presentation");e.jstree.defaults.checkbox={visible:true,three_state:true,whole_node:true,keep_selected_style:true,cascade:"",tie_selection:true};e.jstree.plugins.checkbox=function(s,t){this.bind=function(){t.bind.call(this);this._data.checkbox.uto=false;this._data.checkbox.selected=[];if(this.settings.checkbox.three_state){this.settings.checkbox.cascade="up+down+undetermined"}this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;if(!this.settings.checkbox.keep_selected_style){this.element.addClass("jstree-checkbox-no-clicked")}if(this.settings.checkbox.tie_selection){this.element.addClass("jstree-checkbox-selection")}},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.cascade.indexOf("undetermined")!==-1){this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this))}if(!this.settings.checkbox.tie_selection){this.element.on("model.jstree",e.proxy(function(z,x){var u=this._model.data,y=u[x.parent],A=x.nodes,w,v;for(w=0,v=A.length;w<v;w++){u[A[w]].state.checked=(u[A[w]].original&&u[A[w]].original.state&&u[A[w]].original.state.checked);if(u[A[w]].state.checked){this._data.checkbox.selected.push(A[w])}}},this))}if(this.settings.checkbox.cascade.indexOf("up")!==-1||this.settings.checkbox.cascade.indexOf("down")!==-1){this.element.on("model.jstree",e.proxy(function(D,A){var v=this._model.data,u=v[A.parent],C=A.nodes,H=[],E,B,y,x,w,z,G=this.settings.checkbox.cascade,F=this.settings.checkbox.tie_selection;if(G.indexOf("down")!==-1){if(u.state[F?"selected":"checked"]){for(B=0,y=C.length;B<y;B++){v[C[B]].state[F?"selected":"checked"]=true}this._data[F?"core":"checkbox"].selected=this._data[F?"core":"checkbox"].selected.concat(C)}else{for(B=0,y=C.length;B<y;B++){if(v[C[B]].state[F?"selected":"checked"]){for(x=0,w=v[C[B]].children_d.length;x<w;x++){v[v[C[B]].children_d[x]].state[F?"selected":"checked"]=true}this._data[F?"core":"checkbox"].selected=this._data[F?"core":"checkbox"].selected.concat(v[C[B]].children_d)}}}}if(G.indexOf("up")!==-1){for(B=0,y=u.children_d.length;B<y;B++){if(!v[u.children_d[B]].children.length){H.push(v[u.children_d[B]].parent)}}H=e.vakata.array_unique(H);for(x=0,w=H.length;x<w;x++){u=v[H[x]];while(u&&u.id!=="#"){E=0;for(B=0,y=u.children.length;B<y;B++){E+=v[u.children[B]].state[F?"selected":"checked"]}if(E===y){u.state[F?"selected":"checked"]=true;this._data[F?"core":"checkbox"].selected.push(u.id);z=this.get_node(u,true);if(z&&z.length){z.attr("aria-selected",true).children(".jstree-anchor").addClass(F?"jstree-clicked":"jstree-checked")}}else{break}u=this.get_node(u.parent)}}}this._data[F?"core":"checkbox"].selected=e.vakata.array_unique(this._data[F?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(B,z){var y=z.node,u=this._model.data,C=this.get_node(y.parent),v=this.get_node(y,true),A,w,D,x,F=this.settings.checkbox.cascade,E=this.settings.checkbox.tie_selection;if(F.indexOf("down")!==-1){this._data[E?"core":"checkbox"].selected=e.vakata.array_unique(this._data[E?"core":"checkbox"].selected.concat(y.children_d));for(A=0,w=y.children_d.length;A<w;A++){x=u[y.children_d[A]];x.state[E?"selected":"checked"]=true;if(x&&x.original&&x.original.state&&x.original.state.undetermined){x.original.state.undetermined=false}}}if(F.indexOf("up")!==-1){while(C&&C.id!=="#"){D=0;for(A=0,w=C.children.length;A<w;A++){D+=u[C.children[A]].state[E?"selected":"checked"]}if(D===w){C.state[E?"selected":"checked"]=true;this._data[E?"core":"checkbox"].selected.push(C.id);x=this.get_node(C,true);if(x&&x.length){x.attr("aria-selected",true).children(".jstree-anchor").addClass(E?"jstree-clicked":"jstree-checked")}}else{break}C=this.get_node(C.parent)}}if(F.indexOf("down")!==-1&&v.length){v.find(".jstree-anchor").addClass(E?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",true)}},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(A,y){var z=this.get_node("#"),u=this._model.data,x,v,w;for(x=0,v=z.children_d.length;x<v;x++){w=u[z.children_d[x]];if(w&&w.original&&w.original.state&&w.original.state.undetermined){w.original.state.undetermined=false}}},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(A,x){var w=x.node,u=this.get_node(w,true),y,v,z,C=this.settings.checkbox.cascade,B=this.settings.checkbox.tie_selection;if(w&&w.original&&w.original.state&&w.original.state.undetermined){w.original.state.undetermined=false}if(C.indexOf("down")!==-1){for(y=0,v=w.children_d.length;y<v;y++){z=this._model.data[w.children_d[y]];z.state[B?"selected":"checked"]=false;if(z&&z.original&&z.original.state&&z.original.state.undetermined){z.original.state.undetermined=false}}}if(C.indexOf("up")!==-1){for(y=0,v=w.parents.length;y<v;y++){z=this._model.data[w.parents[y]];z.state[B?"selected":"checked"]=false;if(z&&z.original&&z.original.state&&z.original.state.undetermined){z.original.state.undetermined=false}z=this.get_node(w.parents[y],true);if(z&&z.length){z.attr("aria-selected",false).children(".jstree-anchor").removeClass(B?"jstree-clicked":"jstree-checked")}}}z=[];for(y=0,v=this._data[B?"core":"checkbox"].selected.length;y<v;y++){if((C.indexOf("down")===-1||e.inArray(this._data[B?"core":"checkbox"].selected[y],w.children_d)===-1)&&(C.indexOf("up")===-1||e.inArray(this._data[B?"core":"checkbox"].selected[y],w.parents)===-1)){z.push(this._data[B?"core":"checkbox"].selected[y])}}this._data[B?"core":"checkbox"].selected=e.vakata.array_unique(z);if(C.indexOf("down")!==-1&&u.length){u.find(".jstree-anchor").removeClass(B?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",false)}},this))}if(this.settings.checkbox.cascade.indexOf("up")!==-1){this.element.on("delete_node.jstree",e.proxy(function(A,x){var u=this.get_node(x.parent),v=this._model.data,y,w,B,z,C=this.settings.checkbox.tie_selection;while(u&&u.id!=="#"){B=0;for(y=0,w=u.children.length;y<w;y++){B+=v[u.children[y]].state[C?"selected":"checked"]}if(B===w){u.state[C?"selected":"checked"]=true;this._data[C?"core":"checkbox"].selected.push(u.id);z=this.get_node(u,true);if(z&&z.length){z.attr("aria-selected",true).children(".jstree-anchor").addClass(C?"jstree-clicked":"jstree-checked")}}else{break}u=this.get_node(u.parent)}},this)).on("move_node.jstree",e.proxy(function(D,B){var x=B.is_multi,C=B.old_parent,u=this.get_node(B.parent),w=this._model.data,v,E,A,y,z,F=this.settings.checkbox.tie_selection;if(!x){v=this.get_node(C);while(v&&v.id!=="#"){E=0;for(A=0,y=v.children.length;A<y;A++){E+=w[v.children[A]].state[F?"selected":"checked"]}if(E===y){v.state[F?"selected":"checked"]=true;this._data[F?"core":"checkbox"].selected.push(v.id);z=this.get_node(v,true);if(z&&z.length){z.attr("aria-selected",true).children(".jstree-anchor").addClass(F?"jstree-clicked":"jstree-checked")}}else{break}v=this.get_node(v.parent)}}v=u;while(v&&v.id!=="#"){E=0;for(A=0,y=v.children.length;A<y;A++){E+=w[v.children[A]].state[F?"selected":"checked"]}if(E===y){if(!v.state[F?"selected":"checked"]){v.state[F?"selected":"checked"]=true;this._data[F?"core":"checkbox"].selected.push(v.id);z=this.get_node(v,true);if(z&&z.length){z.attr("aria-selected",true).children(".jstree-anchor").addClass(F?"jstree-clicked":"jstree-checked")}}}else{if(v.state[F?"selected":"checked"]){v.state[F?"selected":"checked"]=false;this._data[F?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[F?"core":"checkbox"].selected,v.id);z=this.get_node(v,true);if(z&&z.length){z.attr("aria-selected",false).children(".jstree-anchor").removeClass(F?"jstree-clicked":"jstree-checked")}}else{break}}v=this.get_node(v.parent)}},this))}};this._undetermined=function(){var x,v,u=this._model.data,w=this.settings.checkbox.tie_selection,z=this._data[w?"core":"checkbox"].selected,A=[],y=this;for(x=0,v=z.length;x<v;x++){if(u[z[x]]&&u[z[x]].parents){A=A.concat(u[z[x]].parents)}}this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var B=y.get_node(this),C;if(!B.state.loaded){if(B.original&&B.original.state&&B.original.state.undetermined&&B.original.state.undetermined===true){A.push(B.id);A=A.concat(B.parents)}}else{for(x=0,v=B.children_d.length;x<v;x++){C=u[B.children_d[x]];if(!C.state.loaded&&C.original&&C.original.state&&C.original.state.undetermined&&C.original.state.undetermined===true){A.push(C.id);A=A.concat(C.parents)}}}});A=e.vakata.array_unique(A);A=e.vakata.array_remove_item(A,"#");this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(x=0,v=A.length;x<v;x++){if(!u[A[x]].state[w?"selected":"checked"]){z=this.get_node(A[x],true);if(z&&z.length){z.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}}}};this.redraw_node=function(A,u,y,z){A=t.redraw_node.apply(this,arguments);if(A){var x,v,w=null;for(x=0,v=A.childNodes.length;x<v;x++){if(A.childNodes[x]&&A.childNodes[x].className&&A.childNodes[x].className.indexOf("jstree-anchor")!==-1){w=A.childNodes[x];break}}if(w){if(!this.settings.checkbox.tie_selection&&this._model.data[A.id].state.checked){w.className+=" jstree-checked"}w.insertBefore(a.cloneNode(false),w.childNodes[0])}}if(!y&&this.settings.checkbox.cascade.indexOf("undetermined")!==-1){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)}return A};this.show_checkboxes=function(){this._data.core.themes.checkboxes=true;this.get_container_ul().removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=false;this.get_container_ul().addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){if(this._data.core.themes.checkboxes){this.hide_checkboxes()}else{this.show_checkboxes()}};this.is_undetermined=function(z){z=this.get_node(z);var y=this.settings.checkbox.cascade,x,v,w=this.settings.checkbox.tie_selection,A=this._data[w?"core":"checkbox"].selected,u=this._model.data;if(!z||z.state[w?"selected":"checked"]===true||y.indexOf("undetermined")===-1||(y.indexOf("down")===-1&&y.indexOf("up")===-1)){return false}if(!z.state.loaded&&z.original.state.undetermined===true){return true}for(x=0,v=z.children_d.length;x<v;x++){if(e.inArray(z.children_d[x],A)!==-1||(!u[z.children_d[x]].state.loaded&&u[z.children_d[x]].original.state.undetermined)){return true}}return false};this.activate_node=function(v,u){if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(u.target).hasClass("jstree-checkbox"))){u.ctrlKey=true}if(this.settings.checkbox.tie_selection||(!this.settings.checkbox.whole_node&&!e(u.target).hasClass("jstree-checkbox"))){return t.activate_node.call(this,v,u)}if(this.is_disabled(v)){return false}if(this.is_checked(v)){this.uncheck_node(v,u)}else{this.check_node(v,u)}this.trigger("activate_node",{node:this.get_node(v)})};this.check_node=function(y,x){if(this.settings.checkbox.tie_selection){return this.select_node(y,false,true,x)}var z,w,u,v;if(e.isArray(y)){y=y.slice();for(w=0,u=y.length;w<u;w++){this.check_node(y[w],x)}return true}y=this.get_node(y);if(!y||y.id==="#"){return false}z=this.get_node(y,true);if(!y.state.checked){y.state.checked=true;this._data.checkbox.selected.push(y.id);if(z&&z.length){z.children(".jstree-anchor").addClass("jstree-checked")}this.trigger("check_node",{node:y,selected:this._data.checkbox.selected,event:x})}};this.uncheck_node=function(x,w){if(this.settings.checkbox.tie_selection){return this.deselect_node(x,false,w)}var v,u,y;if(e.isArray(x)){x=x.slice();for(v=0,u=x.length;v<u;v++){this.uncheck_node(x[v],w)}return true}x=this.get_node(x);if(!x||x.id==="#"){return false}y=this.get_node(x,true);if(x.state.checked){x.state.checked=false;this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,x.id);if(y.length){y.children(".jstree-anchor").removeClass("jstree-checked")}this.trigger("uncheck_node",{node:x,selected:this._data.checkbox.selected,event:w})}};this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all()}var w=this._data.checkbox.selected.concat([]),v,u;this._data.checkbox.selected=this._model.data["#"].children_d.concat();for(v=0,u=this._data.checkbox.selected.length;v<u;v++){if(this._model.data[this._data.checkbox.selected[v]]){this._model.data[this._data.checkbox.selected[v]].state.checked=true}}this.redraw(true);this.trigger("check_all",{selected:this._data.checkbox.selected})};this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all()}var w=this._data.checkbox.selected.concat([]),v,u;for(v=0,u=this._data.checkbox.selected.length;v<u;v++){if(this._model.data[this._data.checkbox.selected[v]]){this._model.data[this._data.checkbox.selected[v]].state.checked=false}}this._data.checkbox.selected=[];this.element.find(".jstree-checked").removeClass("jstree-checked");this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:w})};this.is_checked=function(u){if(this.settings.checkbox.tie_selection){return this.is_selected(u)}u=this.get_node(u);if(!u||u.id==="#"){return false}return u.state.checked};this.get_checked=function(u){if(this.settings.checkbox.tie_selection){return this.get_selected(u)}return u?e.map(this._data.checkbox.selected,e.proxy(function(v){return this.get_node(v)},this)):this._data.checkbox.selected};this.get_top_checked=function(z){if(this.settings.checkbox.tie_selection){return this.get_top_selected(z)}var y=this.get_checked(true),A={},x,w,v,u;for(x=0,w=y.length;x<w;x++){A[y[x].id]=y[x]}for(x=0,w=y.length;x<w;x++){for(v=0,u=y[x].children_d.length;v<u;v++){if(A[y[x].children_d[v]]){delete A[y[x].children_d[v]]}}}y=[];for(x in A){if(A.hasOwnProperty(x)){y.push(x)}}return z?e.map(y,e.proxy(function(B){return this.get_node(B)},this)):y};this.get_bottom_checked=function(x){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(x)}var w=this.get_checked(true),y=[],v,u;for(v=0,u=w.length;v<u;v++){if(!w[v].children.length){y.push(w[v].id)}}return x?e.map(y,e.proxy(function(z){return this.get_node(z)},this)):y};this.load_node=function(z,B){var v,u,y,w,A,x;if(!e.isArray(z)&&!this.settings.checkbox.tie_selection){x=this.get_node(z);if(x&&x.state.loaded){for(v=0,u=x.children_d.length;v<u;v++){if(this._model.data[x.children_d[v]].state.checked){A=true;this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,x.children_d[v])}}}}return t.load_node.apply(this,arguments)};this.get_state=function(){var u=t.get_state.apply(this,arguments);if(this.settings.checkbox.tie_selection){return u}u.checkbox=this._data.checkbox.selected.slice();return u};this.set_state=function(v,x){var u=t.set_state.apply(this,arguments);if(u&&v.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var w=this;e.each(v.checkbox,function(z,y){w.check_node(y)})}delete v.checkbox;return false}return u}};var q=null,p,o;e.jstree.defaults.contextmenu={select_node:true,show_at_node:true,items:function(t,s){return{create:{separator_before:false,separator_after:true,_disabled:false,label:"Create",action:function(v){var u=e.jstree.reference(v.reference),w=u.get_node(v.reference);u.create_node(w,{},"last",function(x){setTimeout(function(){u.edit(x)},0)})}},rename:{separator_before:false,separator_after:false,_disabled:false,label:"Rename",action:function(v){var u=e.jstree.reference(v.reference),w=u.get_node(v.reference);u.edit(w)}},remove:{separator_before:false,icon:false,separator_after:false,_disabled:false,label:"Delete",action:function(v){var u=e.jstree.reference(v.reference),w=u.get_node(v.reference);if(u.is_selected(w)){u.delete_node(u.get_selected())}else{u.delete_node(w)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(v){var u=e.jstree.reference(v.reference),w=u.get_node(v.reference);if(u.is_selected(w)){u.cut(u.get_selected())}else{u.cut(w)}}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(v){var u=e.jstree.reference(v.reference),w=u.get_node(v.reference);if(u.is_selected(w)){u.copy(u.get_selected())}else{u.copy(w)}}},paste:{separator_before:false,icon:false,_disabled:function(u){return !e.jstree.reference(u.reference).can_paste()},separator_after:false,label:"Paste",action:function(v){var u=e.jstree.reference(v.reference),w=u.get_node(v.reference);u.paste(w)}}}}}}};e.jstree.plugins.contextmenu=function(s,t){this.bind=function(){t.bind.call(this);var u=0;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy(function(w,v){w.preventDefault();u=w.ctrlKey?+new Date():0;if(v||q){u=(+new Date())+10000}if(q){clearTimeout(q)}if(!this.is_loading(w.currentTarget)){this.show_contextmenu(w.currentTarget,w.pageX,w.pageY,w)}},this)).on("click.jstree",".jstree-anchor",e.proxy(function(v){if(this._data.contextmenu.visible&&(!u||(+new Date())-u>250)){e.vakata.context.hide()}u=0},this)).on("touchstart.jstree",".jstree-anchor",function(v){if(!v.originalEvent||!v.originalEvent.changedTouches||!v.originalEvent.changedTouches[0]){return}p=v.pageX;o=v.pageY;q=setTimeout(function(){e(v.currentTarget).trigger("contextmenu",true)},750)});e(document).on("context_hide.vakata.jstree",e.proxy(function(){this._data.contextmenu.visible=false},this))};this.teardown=function(){if(this._data.contextmenu.visible){e.vakata.context.hide()}t.teardown.call(this)};this.show_contextmenu=function(w,D,B,z){w=this.get_node(w);if(!w||w.id==="#"){return false}var E=this.settings.contextmenu,A=this.get_node(w,true),C=A.children(".jstree-anchor"),u=false,v=false;if(E.show_at_node||D===f||B===f){u=C.offset();D=u.left;B=u.top+this._data.core.li_height}if(this.settings.contextmenu.select_node&&!this.is_selected(w)){this.activate_node(w,z)}v=E.items;if(e.isFunction(v)){v=v.call(this,w,e.proxy(function(x){this._show_contextmenu(w,D,B,x)},this))}if(e.isPlainObject(v)){this._show_contextmenu(w,D,B,v)}};this._show_contextmenu=function(z,u,B,w){var A=this.get_node(z,true),v=A.children(".jstree-anchor");e(document).one("context_show.vakata.jstree",e.proxy(function(C,y){var x="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(y.element).addClass(x)},this));this._data.contextmenu.visible=true;e.vakata.context.show(v,{x:u,y:B},w);this.trigger("show_contextmenu",{node:z,x:u,y:B})}};e(function(){e(document).on("touchmove.vakata.jstree",function(s){if(q&&s.originalEvent&&s.originalEvent.changedTouches&&s.originalEvent.changedTouches[0]&&(Math.abs(p-s.pageX)>50||Math.abs(o-s.pageY)>50)){clearTimeout(q)}}).on("touchend.vakata.jstree",function(s){if(q){clearTimeout(q)}})});(function(t){var u=false,s={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};t.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(v){t(document).triggerHandler("context_"+v+".vakata",{reference:s.reference,element:s.element,position:{x:s.position_x,y:s.position_y}})},_execute:function(v){v=s.items[v];return v&&(!v._disabled||(t.isFunction(v._disabled)&&!v._disabled({item:v,reference:s.reference,element:s.element})))&&v.action?v.action.call(null,{item:v,reference:s.reference,element:s.element,position:{x:s.position_x,y:s.position_y}}):false},_parse:function(z,x){if(!z){return false}if(!x){s.html="";s.items=[]}var y="",v=false,w;if(x){y+="<ul>"}t.each(z,function(A,B){if(!B){return true}s.items.push(B);if(!v&&B.separator_before){y+="<li class='vakata-context-separator'><a href='#' "+(t.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"}v=false;y+="<li class='"+(B._class||"")+(B._disabled===true||(t.isFunction(B._disabled)&&B._disabled({item:B,reference:s.reference,element:s.element}))?" vakata-contextmenu-disabled ":"")+"' "+(B.shortcut?" data-shortcut='"+B.shortcut+"' ":"")+">";y+="<a href='#' rel='"+(s.items.length-1)+"'>";if(t.vakata.context.settings.icons){y+="<i ";if(B.icon){if(B.icon.indexOf("/")!==-1||B.icon.indexOf(".")!==-1){y+=" style='background:url(\""+B.icon+"\") center center no-repeat' "}else{y+=" class='"+B.icon+"' "}}y+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"}y+=(t.isFunction(B.label)?B.label({item:A,reference:s.reference,element:s.element}):B.label)+(B.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+B.shortcut+'">'+(B.shortcut_label||"")+"</span>":"")+"</a>";if(B.submenu){w=t.vakata.context._parse(B.submenu,true);if(w){y+=w}}y+="</li>";if(B.separator_after){y+="<li class='vakata-context-separator'><a href='#' "+(t.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>";v=true}});y=y.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(x){y+="</ul>"}if(!x){s.html=y;t.vakata.context._trigger("parse")}return y.length>10?y:false},_show_submenu:function(E){E=t(E);if(!E.length||!E.children("ul").length){return}var D=E.children("ul"),v=E.offset().left+E.outerWidth(),F=E.offset().top,z=D.width(),B=D.height(),A=t(window).width()+t(window).scrollLeft(),C=t(window).height()+t(window).scrollTop();if(u){E[v-(z+10+E.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left")}else{E[v+z+10>A?"addClass":"removeClass"]("vakata-context-right")}if(F+B+10>C){D.css("bottom","-1px")}D.show()},show:function(A,D,B){var z,E,I,H,J,C,v,G,F=true;if(s.element&&s.element.length){s.element.width("")}switch(F){case (!D&&!A):return false;case (!!D&&!!A):s.reference=A;s.position_x=D.x;s.position_y=D.y;break;case (!D&&!!A):s.reference=A;z=A.offset();s.position_x=z.left+A.outerHeight();s.position_y=z.top;break;case (!!D&&!A):s.position_x=D.x;s.position_y=D.y;break}if(!!A&&!B&&t(A).data("vakata_contextmenu")){B=t(A).data("vakata_contextmenu")}if(t.vakata.context._parse(B)){s.element.html(s.html)}if(s.items.length){s.element.appendTo("body");E=s.element;I=s.position_x;H=s.position_y;J=E.width();C=E.height();v=t(window).width()+t(window).scrollLeft();G=t(window).height()+t(window).scrollTop();if(u){I-=(E.outerWidth()-t(A).outerWidth());if(I<t(window).scrollLeft()+20){I=t(window).scrollLeft()+20}}if(I+J+20>v){I=v-(J+20)}if(H+C+20>G){H=G-(C+20)}s.element.css({left:I,top:H}).show().find("a").first().focus().parent().addClass("vakata-context-hover");s.is_visible=true;t.vakata.context._trigger("show")}},hide:function(){if(s.is_visible){s.element.hide().find("ul").hide().end().find(":focus").blur().end().detach();s.is_visible=false;t.vakata.context._trigger("hide")}}};t(function(){u=t("body").css("direction")==="rtl";var v=false;s.element=t("<ul class='vakata-context'></ul>");s.element.on("mouseenter","li",function(w){w.stopImmediatePropagation();if(t.contains(this,w.relatedTarget)){return}if(v){clearTimeout(v)}s.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();t(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover");t.vakata.context._show_submenu(this)}).on("mouseleave","li",function(w){if(t.contains(this,w.relatedTarget)){return}t(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(w){t(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if(t.vakata.context.settings.hide_onmouseleave){v=setTimeout((function(x){return function(){t.vakata.context.hide()}}(this)),t.vakata.context.settings.hide_onmouseleave)}}).on("click","a",function(w){w.preventDefault();if(!t(this).blur().parent().hasClass("vakata-context-disabled")&&t.vakata.context._execute(t(this).attr("rel"))!==false){t.vakata.context.hide()}}).on("keydown","a",function(w){var x=null;switch(w.which){case 13:case 32:w.type="mouseup";w.preventDefault();t(w.currentTarget).trigger(w);break;case 37:if(s.is_visible){s.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus();w.stopImmediatePropagation();w.preventDefault()}break;case 38:if(s.is_visible){x=s.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!x.length){x=s.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()}x.addClass("vakata-context-hover").children("a").focus();w.stopImmediatePropagation();w.preventDefault()}break;case 39:if(s.is_visible){s.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus();w.stopImmediatePropagation();w.preventDefault()}break;case 40:if(s.is_visible){x=s.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!x.length){x=s.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()}x.addClass("vakata-context-hover").children("a").focus();w.stopImmediatePropagation();w.preventDefault()}break;case 27:t.vakata.context.hide();w.preventDefault();break;default:break}}).on("keydown",function(x){x.preventDefault();var w=s.element.find(".vakata-contextmenu-shortcut-"+x.which).parent();if(w.parent().not(".vakata-context-disabled")){w.click()}});t(document).on("mousedown.vakata.jstree",function(w){if(s.is_visible&&!t.contains(s.element[0],w.target)){t.vakata.context.hide()}}).on("context_show.vakata.jstree",function(x,w){s.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(u){s.element.addClass("vakata-context-rtl").css("direction","rtl")}s.element.find("ul").hide().end()})})}(e));e.jstree.defaults.dnd={copy:true,open_timeout:500,is_draggable:true,check_while_dragging:true,always_copy:false,inside_pos:0,drag_selection:true,touch:true};e.jstree.plugins.dnd=function(s,t){this.bind=function(){t.bind.call(this);this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",e.proxy(function(x){if(x.type==="touchstart"&&(!this.settings.dnd.touch||(this.settings.dnd.touch==="selected"&&!e(x.currentTarget).hasClass("jstree-clicked")))){return true}var w=this.get_node(x.target),v=this.is_selected(w)&&this.settings.drag_selection?this.get_selected().length:1,u=(v>1?v+" "+this.get_string("nodes"):this.get_text(x.currentTarget));if(this.settings.core.force_text){u=e("<div />").text(u).html()}if(w&&w.id&&w.id!=="#"&&(x.which===1||x.type==="touchstart")&&(this.settings.dnd.is_draggable===true||(e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,(v>1?this.get_selected(true):[w]))))){this.element.trigger("mousedown.jstree");return e.vakata.dnd.start(x,{jstree:true,origin:this,obj:this.get_node(w,true),nodes:v>1?this.get_selected():[w.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+u+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}},this))}};e(function(){var v=false,u=false,t=false,s=e('<div id="jstree-marker">&#160;</div>').hide();e(document).on("dnd_start.vakata.jstree",function(x,w){v=false;if(!w||!w.data||!w.data.jstree){return}s.appendTo("body")}).on("dnd_move.vakata.jstree",function(N,P){if(t){clearTimeout(t)}if(!P||!P.data||!P.data.jstree){return}if(P.event.target.id&&P.event.target.id==="jstree-marker"){return}var w=e.jstree.reference(P.event.target),z=false,O=false,x=false,K,F,M,G,L,H,E,D,C,B,I,J,A,y;if(w&&w._data&&w._data.dnd){s.attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":""));P.helper.children().attr("class","jstree-"+w.get_theme()+" jstree-"+w.get_theme()+"-"+w.get_theme_variant()+" "+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[P.data.origin&&(P.data.origin.settings.dnd.always_copy||(P.data.origin.settings.dnd.copy&&(P.event.metaKey||P.event.ctrlKey)))?"show":"hide"]();if((P.event.target===w.element[0]||P.event.target===w.get_container_ul()[0])&&w.get_container_ul().children().length===0){E=true;for(D=0,C=P.data.nodes.length;D<C;D++){E=E&&w.check((P.data.origin&&(P.data.origin.settings.dnd.always_copy||(P.data.origin.settings.dnd.copy&&(P.event.metaKey||P.event.ctrlKey)))?"copy_node":"move_node"),(P.data.origin&&P.data.origin!==w?P.data.origin.get_node(P.data.nodes[D]):P.data.nodes[D]),"#","last",{dnd:true,ref:w.get_node("#"),pos:"i",is_multi:(P.data.origin&&P.data.origin!==w),is_foreign:(!P.data.origin)});if(!E){break}}if(E){v={ins:w,par:"#",pos:"last"};s.hide();P.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");return}}else{z=e(P.event.target).closest(".jstree-anchor");if(z&&z.length&&z.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")){O=z.offset();x=P.event.pageY-O.top;M=z.height();if(x<M/3){H=["b","i","a"]}else{if(x>M-M/3){H=["a","i","b"]}else{H=x>M/2?["i","a","b"]:["i","b","a"]}}e.each(H,function(R,Q){switch(Q){case"b":K=O.left-6;F=O.top;G=w.get_parent(z);L=z.parent().index();break;case"i":A=w.settings.dnd.inside_pos;y=w.get_node(z.parent());K=O.left-2;F=O.top+M/2+1;G=y.id;L=A==="first"?0:(A==="last"?y.children.length:Math.min(A,y.children.length));break;case"a":K=O.left-6;F=O.top+M;G=w.get_parent(z);L=z.parent().index()+1;break}E=true;for(D=0,C=P.data.nodes.length;D<C;D++){B=P.data.origin&&(P.data.origin.settings.dnd.always_copy||(P.data.origin.settings.dnd.copy&&(P.event.metaKey||P.event.ctrlKey)))?"copy_node":"move_node";I=L;if(B==="move_node"&&Q==="a"&&(P.data.origin&&P.data.origin===w)&&G===w.get_parent(P.data.nodes[D])){J=w.get_node(G);if(I>e.inArray(P.data.nodes[D],J.children)){I-=1}}E=E&&((w&&w.settings&&w.settings.dnd&&w.settings.dnd.check_while_dragging===false)||w.check(B,(P.data.origin&&P.data.origin!==w?P.data.origin.get_node(P.data.nodes[D]):P.data.nodes[D]),G,I,{dnd:true,ref:w.get_node(z.parent()),pos:Q,is_multi:(P.data.origin&&P.data.origin!==w),is_foreign:(!P.data.origin)}));if(!E){if(w&&w.last_error){u=w.last_error()}break}}if(Q==="i"&&z.parent().is(".jstree-closed")&&w.settings.dnd.open_timeout){t=setTimeout((function(S,T){return function(){S.open_node(T)}}(w,z)),w.settings.dnd.open_timeout)}if(E){v={ins:w,par:G,pos:Q==="i"&&A==="last"&&L===0&&!w.is_loaded(y)?"last":L};s.css({left:K+"px",top:F+"px"}).show();P.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");u={};H=true;return false}});if(H===true){return}}}}v=false;P.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");s.hide()}).on("dnd_scroll.vakata.jstree",function(x,w){if(!w||!w.data||!w.data.jstree){return}s.hide();v=false;w.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er")}).on("dnd_stop.vakata.jstree",function(A,z){if(t){clearTimeout(t)}if(!z||!z.data||!z.data.jstree){return}s.hide().detach();var y,x,w=[];if(v){for(y=0,x=z.data.nodes.length;y<x;y++){w[y]=z.data.origin?z.data.origin.get_node(z.data.nodes[y]):z.data.nodes[y];if(z.data.origin){w[y].instance=z.data.origin}}v.ins[z.data.origin&&(z.data.origin.settings.dnd.always_copy||(z.data.origin.settings.dnd.copy&&(z.event.metaKey||z.event.ctrlKey)))?"copy_node":"move_node"](w,v.par,v.pos);for(y=0,x=w.length;y<x;y++){if(w[y].instance){w[y].instance=null}}}else{y=e(z.event.target).closest(".jstree");if(y.length&&u&&u.error&&u.error==="check"){y=y.jstree(true);if(y){y.settings.core.error.call(this,u)}}}}).on("keyup.jstree keydown.jstree",function(x,w){w=e.vakata.dnd._get();if(w&&w.data&&w.data.jstree){w.helper.find(".jstree-copy").first()[w.data.origin&&(w.data.origin.settings.dnd.always_copy||(w.data.origin.settings.dnd.copy&&(x.metaKey||x.ctrlKey)))?"show":"hide"]()}})});(function(t){var s={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};t.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(w,v){var u=t.vakata.dnd._get();u.event=v;t(document).triggerHandler("dnd_"+w+".vakata",u)},_get:function(){return{data:s.data,element:s.element,helper:s.helper}},_clean:function(){if(s.helper){s.helper.remove()}if(s.scroll_i){clearInterval(s.scroll_i);s.scroll_i=false}s={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};t(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",t.vakata.dnd.drag);t(document).off("mouseup.vakata.jstree touchend.vakata.jstree",t.vakata.dnd.stop)},_scroll:function(w){if(!s.scroll_e||(!s.scroll_l&&!s.scroll_t)){if(s.scroll_i){clearInterval(s.scroll_i);s.scroll_i=false}return false}if(!s.scroll_i){s.scroll_i=setInterval(t.vakata.dnd._scroll,100);return false}if(w===true){return false}var v=s.scroll_e.scrollTop(),u=s.scroll_e.scrollLeft();s.scroll_e.scrollTop(v+s.scroll_t*t.vakata.dnd.settings.scroll_speed);s.scroll_e.scrollLeft(u+s.scroll_l*t.vakata.dnd.settings.scroll_speed);if(v!==s.scroll_e.scrollTop()||u!==s.scroll_e.scrollLeft()){t.vakata.dnd._trigger("scroll",s.scroll_e)}},start:function(w,v,u){if(w.type==="touchstart"&&w.originalEvent&&w.originalEvent.changedTouches&&w.originalEvent.changedTouches[0]){w.pageX=w.originalEvent.changedTouches[0].pageX;w.pageY=w.originalEvent.changedTouches[0].pageY;w.target=document.elementFromPoint(w.originalEvent.changedTouches[0].pageX-window.pageXOffset,w.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(s.is_drag){t.vakata.dnd.stop({})}try{w.currentTarget.unselectable="on";w.currentTarget.onselectstart=function(){return false};if(w.currentTarget.style){w.currentTarget.style.MozUserSelect="none"}}catch(x){}s.init_x=w.pageX;s.init_y=w.pageY;s.data=v;s.is_down=true;s.element=w.currentTarget;s.target=w.target;s.is_touch=w.type==="touchstart";if(u!==false){s.helper=t("<div id='vakata-dnd'></div>").html(u).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})}t(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",t.vakata.dnd.drag);t(document).on("mouseup.vakata.jstree touchend.vakata.jstree",t.vakata.dnd.stop);return false},drag:function(B){if(B.type==="touchmove"&&B.originalEvent&&B.originalEvent.changedTouches&&B.originalEvent.changedTouches[0]){B.pageX=B.originalEvent.changedTouches[0].pageX;B.pageY=B.originalEvent.changedTouches[0].pageY;B.target=document.elementFromPoint(B.originalEvent.changedTouches[0].pageX-window.pageXOffset,B.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(!s.is_down){return}if(!s.is_drag){if(Math.abs(B.pageX-s.init_x)>(s.is_touch?t.vakata.dnd.settings.threshold_touch:t.vakata.dnd.settings.threshold)||Math.abs(B.pageY-s.init_y)>(s.is_touch?t.vakata.dnd.settings.threshold_touch:t.vakata.dnd.settings.threshold)){if(s.helper){s.helper.appendTo("body");s.helper_w=s.helper.outerWidth()}s.is_drag=true;t.vakata.dnd._trigger("start",B)}else{return}}var C=false,F=false,D=false,v=false,u=false,z=false,y=false,A=false,E=false,x=false;s.scroll_t=0;s.scroll_l=0;s.scroll_e=false;t(t(B.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return(/^auto|scroll$/).test(t(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var w=t(this),G=w.offset();if(this.scrollHeight>this.offsetHeight){if(G.top+w.height()-B.pageY<t.vakata.dnd.settings.scroll_proximity){s.scroll_t=1}if(B.pageY-G.top<t.vakata.dnd.settings.scroll_proximity){s.scroll_t=-1}}if(this.scrollWidth>this.offsetWidth){if(G.left+w.width()-B.pageX<t.vakata.dnd.settings.scroll_proximity){s.scroll_l=1}if(B.pageX-G.left<t.vakata.dnd.settings.scroll_proximity){s.scroll_l=-1}}if(s.scroll_t||s.scroll_l){s.scroll_e=t(this);return false}});if(!s.scroll_e){C=t(document);F=t(window);D=C.height();v=F.height();u=C.width();z=F.width();y=C.scrollTop();A=C.scrollLeft();if(D>v&&B.pageY-y<t.vakata.dnd.settings.scroll_proximity){s.scroll_t=-1}if(D>v&&v-(B.pageY-y)<t.vakata.dnd.settings.scroll_proximity){s.scroll_t=1}if(u>z&&B.pageX-A<t.vakata.dnd.settings.scroll_proximity){s.scroll_l=-1}if(u>z&&z-(B.pageX-A)<t.vakata.dnd.settings.scroll_proximity){s.scroll_l=1}if(s.scroll_t||s.scroll_l){s.scroll_e=C}}if(s.scroll_e){t.vakata.dnd._scroll(true)}if(s.helper){E=parseInt(B.pageY+t.vakata.dnd.settings.helper_top,10);x=parseInt(B.pageX+t.vakata.dnd.settings.helper_left,10);if(D&&E+25>D){E=D-50}if(u&&x+s.helper_w>u){x=u-(s.helper_w+2)}s.helper.css({left:x+"px",top:E+"px"})}t.vakata.dnd._trigger("move",B);return false},stop:function(u){if(u.type==="touchend"&&u.originalEvent&&u.originalEvent.changedTouches&&u.originalEvent.changedTouches[0]){u.pageX=u.originalEvent.changedTouches[0].pageX;u.pageY=u.originalEvent.changedTouches[0].pageY;u.target=document.elementFromPoint(u.originalEvent.changedTouches[0].pageX-window.pageXOffset,u.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(s.is_drag){t.vakata.dnd._trigger("stop",u)}else{if(u.type==="touchend"&&u.target===s.target){var v=setTimeout(function(){t(u.target).click()},100);t(u.target).one("click",function(){if(v){clearTimeout(v)}})}}t.vakata.dnd._clean();return false}}}(e));e.jstree.defaults.search={ajax:false,fuzzy:false,case_sensitive:false,show_only_matches:false,close_opened_onclear:true,search_leaves_only:false,search_callback:false};e.jstree.plugins.search=function(s,t){this.bind=function(){t.bind.call(this);this._data.search.str="";this._data.search.dom=e();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=false;this.element.on("before_open.jstree",e.proxy(function(A,z){var v,u,y,x=this._data.search.res,w=[],B=e();if(x&&x.length){this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(x,function(C){return"0123456789".indexOf(C[0])!==-1?"\\3"+C[0]+" "+C.substr(1).replace(e.jstree.idregex,"\\$&"):C.replace(e.jstree.idregex,"\\$&")}).join(", #")));this._data.search.dom.children(".jstree-anchor").addClass("jstree-search");if(this._data.search.som&&this._data.search.res.length){for(v=0,u=x.length;v<u;v++){w=w.concat(this.get_node(x[v]).parents)}w=e.vakata.array_remove_item(e.vakata.array_unique(w),"#");B=w.length?e(this.element[0].querySelectorAll("#"+e.map(w,function(C){return"0123456789".indexOf(C[0])!==-1?"\\3"+C[0]+" "+C.substr(1).replace(e.jstree.idregex,"\\$&"):C.replace(e.jstree.idregex,"\\$&")}).join(", #"))):e();this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");B=B.add(this._data.search.dom);B.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){e(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}}},this)).on("search.jstree",e.proxy(function(v,u){if(this._data.search.som){if(u.nodes.length){this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");u.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){e(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}}},this)).on("clear_search.jstree",e.proxy(function(v,u){if(this._data.search.som&&u.nodes.length){this.element.find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")}},this))};this.search=function(A,C,w){if(A===false||e.trim(A.toString())===""){return this.clear_search()}A=A.toString();var D=this.settings.search,B=D.ajax?D.ajax:false,z=null,u=[],v=[],y,x;if(this._data.search.res.length){this.clear_search()}if(w===f){w=D.show_only_matches}if(!C&&B!==false){if(e.isFunction(B)){return B.call(this,A,e.proxy(function(E){if(E&&E.d){E=E.d}this._load_nodes(!e.isArray(E)?[]:e.vakata.array_unique(E),function(){this.search(A,true,w)},true)},this))}else{B=e.extend({},B);if(!B.data){B.data={}}B.data.str=A;return e.ajax(B).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(B)};this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(E){if(E&&E.d){E=E.d}this._load_nodes(!e.isArray(E)?[]:e.vakata.array_unique(E),function(){this.search(A,true,w)},true)},this))}}this._data.search.str=A;this._data.search.dom=e();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=w;z=new e.vakata.search(A,true,{caseSensitive:D.case_sensitive,fuzzy:D.fuzzy});e.each(this._model.data,function(F,E){if(E.text&&((D.search_callback&&D.search_callback.call(this,A,E))||(!D.search_callback&&z.search(E.text).isMatch))&&(!D.search_leaves_only||(E.state.loaded&&E.children.length===0))){u.push(F);v=v.concat(E.parents)}});if(u.length){v=e.vakata.array_unique(v);this._search_open(v);this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(u,function(E){return"0123456789".indexOf(E[0])!==-1?"\\3"+E[0]+" "+E.substr(1).replace(e.jstree.idregex,"\\$&"):E.replace(e.jstree.idregex,"\\$&")}).join(", #")));this._data.search.res=u;this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:A,res:this._data.search.res,show_only_matches:w})};this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");if(this.settings.search.close_opened_onclear){this.close_node(this._data.search.opn,0)}this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=e()};this._search_open=function(v){var u=this;e.each(v.concat([]),function(x,w){if(w==="#"){return true}try{w=e("#"+w.replace(e.jstree.idregex,"\\$&"),u.element)}catch(y){}if(w&&w.length){if(u.is_closed(w)){u._data.search.opn.push(w[0].id);u.open_node(w,function(){u._search_open(v)},0)}}})}};(function(s){s.vakata.search=function(y,w,D){D=D||{};if(D.fuzzy!==false){D.fuzzy=true}y=D.caseSensitive?y:y.toLowerCase();var A=D.location||0,B=D.distance||100,z=D.threshold||0.6,t=y.length,u,v,x,C;if(t>32){D.fuzzy=false}if(D.fuzzy){u=1<<(t-1);v=(function(){var E={},F=0;for(F=0;F<t;F++){E[y.charAt(F)]=0}for(F=0;F<t;F++){E[y.charAt(F)]|=1<<(t-F-1)}return E}());x=function(H,E){var G=H/t,F=Math.abs(A-E);if(!B){return F?1:G}return G+(F/B)}}C=function(R){R=D.caseSensitive?R:R.toLowerCase();if(y===R||R.indexOf(y)!==-1){return{isMatch:true,score:0}}if(!D.fuzzy){return{isMatch:false,score:1}}var M,L,Q=R.length,I=z,K=R.indexOf(y,A),O,H,F=t+Q,E,G,P,T,S,J=1,N=[];if(K!==-1){I=Math.min(x(0,K),I);K=R.lastIndexOf(y,A+t);if(K!==-1){I=Math.min(x(0,K),I)}}K=-1;for(M=0;M<t;M++){O=0;H=F;while(O<H){if(x(M,A+H)<=I){O=H}else{F=H}H=Math.floor((F-O)/2+O)}F=H;G=Math.max(1,A-H+1);P=Math.min(A+H,Q)+t;T=new Array(P+2);T[P+1]=(1<<M)-1;for(L=P;L>=G;L--){S=v[R.charAt(L-1)];if(M===0){T[L]=((T[L+1]<<1)|1)&S}else{T[L]=((T[L+1]<<1)|1)&S|(((E[L+1]|E[L])<<1)|1)|E[L+1]}if(T[L]&u){J=x(M,L-1);if(J<=I){I=J;K=L-1;N.push(K);if(K>A){G=Math.max(1,2*A-K)}else{break}}}}if(x(M+1,A)>I){break}E=T}return{isMatch:K>=0,score:J}};return w===true?{search:C}:C(w)}}(e));e.jstree.defaults.sort=function(t,s){return this.get_text(t)>this.get_text(s)?1:-1};e.jstree.plugins.sort=function(s,t){this.bind=function(){t.bind.call(this);this.element.on("model.jstree",e.proxy(function(v,u){this.sort(u.parent,true)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(v,u){this.sort(u.parent||u.node.parent,false);this.redraw_node(u.parent||u.node.parent,true)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(v,u){this.sort(u.parent,false);this.redraw_node(u.parent,true)},this))};this.sort=function(x,u){var w,v;x=this.get_node(x);if(x&&x.children&&x.children.length){x.children.sort(e.proxy(this.settings.sort,this));if(u){for(w=0,v=x.children_d.length;w<v;w++){this.sort(x.children_d[w],false)}}}}};var c=false;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:false,filter:false};e.jstree.plugins.state=function(s,t){this.bind=function(){t.bind.call(this);var u=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){if(c){clearTimeout(c)}c=setTimeout(e.proxy(function(){this.save_state()},this),100)},this));this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(w,v){this.element.one("restore_state.jstree",u);if(!this.restore_state()){u()}},this))};this.save_state=function(){var u={state:this.get_state(),ttl:this.settings.state.ttl,sec:+(new Date())};e.vakata.storage.set(this.settings.state.key,JSON.stringify(u))};this.restore_state=function(){var u=e.vakata.storage.get(this.settings.state.key);if(!!u){try{u=JSON.parse(u)}catch(v){return false}}if(!!u&&u.ttl&&u.sec&&+(new Date())-u.sec>u.ttl){return false}if(!!u&&u.state){u=u.state}if(!!u&&e.isFunction(this.settings.state.filter)){u=this.settings.state.filter.call(this,u)}if(!!u){this.element.one("set_state.jstree",function(x,w){w.instance.trigger("restore_state",{state:e.extend(true,{},u)})});this.set_state(u);return true}return false};this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}};(function(s,t){s.vakata.storage={set:function(u,v){return window.localStorage.setItem(u,v)},get:function(u){return window.localStorage.getItem(u)},del:function(u){return window.localStorage.removeItem(u)}}}(e));e.jstree.defaults.types={"#":{},"default":{}};e.jstree.plugins.types=function(s,t){this.init=function(x,v){var w,u;if(v&&v.types&&v.types["default"]){for(w in v.types){if(w!=="default"&&w!=="#"&&v.types.hasOwnProperty(w)){for(u in v.types["default"]){if(v.types["default"].hasOwnProperty(u)&&v.types[w][u]===f){v.types[w][u]=v.types["default"][u]}}}}}t.init.call(this,x,v);this._model.data["#"].type="#"};this.refresh=function(v,u){t.refresh.call(this,v,u);this._model.data["#"].type="#"};this.bind=function(){this.element.on("model.jstree",e.proxy(function(z,y){var u=this._model.data,B=y.nodes,x=this.settings.types,w,v,A="default";for(w=0,v=B.length;w<v;w++){A="default";if(u[B[w]].original&&u[B[w]].original.type&&x[u[B[w]].original.type]){A=u[B[w]].original.type}if(u[B[w]].data&&u[B[w]].data.jstree&&u[B[w]].data.jstree.type&&x[u[B[w]].data.jstree.type]){A=u[B[w]].data.jstree.type}u[B[w]].type=A;if(u[B[w]].icon===true&&x[A].icon!==f){u[B[w]].icon=x[A].icon}}u["#"].type="#"},this));t.bind.call(this)};this.get_json=function(A,w,B){var z,v,u=this._model.data,y=w?e.extend(true,{},w,{no_id:false}):{},x=t.get_json.call(this,A,y,B);if(x===false){return false}if(e.isArray(x)){for(z=0,v=x.length;z<v;z++){x[z].type=x[z].id&&u[x[z].id]&&u[x[z].id].type?u[x[z].id].type:"default";if(w&&w.no_id){delete x[z].id;if(x[z].li_attr&&x[z].li_attr.id){delete x[z].li_attr.id}if(x[z].a_attr&&x[z].a_attr.id){delete x[z].a_attr.id}}}}else{x.type=x.id&&u[x.id]&&u[x.id].type?u[x.id].type:"default";if(w&&w.no_id){x=this._delete_ids(x)}}return x};this._delete_ids=function(w){if(e.isArray(w)){for(var v=0,u=w.length;v<u;v++){w[v]=this._delete_ids(w[v])}return w}delete w.id;if(w.li_attr&&w.li_attr.id){delete w.li_attr.id}if(w.a_attr&&w.a_attr.id){delete w.a_attr.id}if(w.children&&e.isArray(w.children)){w.children=this._delete_ids(w.children)}return w};this.check=function(C,x,A,D,B){if(t.check.call(this,C,x,A,D,B)===false){return false}x=x&&x.id?x:this.get_node(x);A=A&&A.id?A:this.get_node(A);var u=x&&x.id?e.jstree.reference(x.id):null,y,z,w,v;u=u&&u._model&&u._model.data?u._model.data:null;switch(C){case"create_node":case"move_node":case"copy_node":if(C!=="move_node"||e.inArray(x.id,A.children)===-1){y=this.get_rules(A);if(y.max_children!==f&&y.max_children!==-1&&y.max_children===A.children.length){this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+C,data:JSON.stringify({chk:C,pos:D,obj:x&&x.id?x.id:false,par:A&&A.id?A.id:false})};return false}if(y.valid_children!==f&&y.valid_children!==-1&&e.inArray((x.type||"default"),y.valid_children)===-1){this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+C,data:JSON.stringify({chk:C,pos:D,obj:x&&x.id?x.id:false,par:A&&A.id?A.id:false})};return false}if(u&&x.children_d&&x.parents){z=0;for(w=0,v=x.children_d.length;w<v;w++){z=Math.max(z,u[x.children_d[w]].parents.length)}z=z-x.parents.length+1}if(z<=0||z===f){z=1}do{if(y.max_depth!==f&&y.max_depth!==-1&&y.max_depth<z){this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+C,data:JSON.stringify({chk:C,pos:D,obj:x&&x.id?x.id:false,par:A&&A.id?A.id:false})};return false}A=this.get_node(A.parent);y=this.get_rules(A);z++}while(A)}break}return true};this.get_rules=function(v){v=this.get_node(v);if(!v){return false}var u=this.get_type(v,true);if(u.max_depth===f){u.max_depth=-1}if(u.max_children===f){u.max_children=-1}if(u.valid_children===f){u.valid_children=-1}return u};this.get_type=function(u,v){u=this.get_node(u);return(!u)?false:(v?e.extend({type:u.type},this.settings.types[u.type]):u.type)};this.set_type=function(A,y){var w,z,x,v,u;if(e.isArray(A)){A=A.slice();for(z=0,x=A.length;z<x;z++){this.set_type(A[z],y)}return true}w=this.settings.types;A=this.get_node(A);if(!w[y]||!A){return false}v=A.type;u=this.get_icon(A);A.type=y;if(u===true||(w[v]&&w[v].icon!==f&&u===w[v].icon)){this.set_icon(A,w[y].icon!==f?w[y].icon:true)}return true}};e.jstree.defaults.unique={case_sensitive:false,duplicate:function(t,s){return t+" ("+s+")"}};e.jstree.plugins.unique=function(s,t){this.check=function(C,y,z,D,A){if(t.check.call(this,C,y,z,D,A)===false){return false}y=y&&y.id?y:this.get_node(y);z=z&&z.id?z:this.get_node(z);if(!z||!z.children){return true}var u=C==="rename_node"?D:y.text,B=[],E=this.settings.unique.case_sensitive,v=this._model.data,x,w;for(x=0,w=z.children.length;x<w;x++){B.push(E?v[z.children[x]].text:v[z.children[x]].text.toLowerCase())}if(!E){u=u.toLowerCase()}switch(C){case"delete_node":return true;case"rename_node":x=(e.inArray(u,B)===-1||(y.text&&y.text[E?"toString":"toLowerCase"]()===u));if(!x){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+u+" already exists. Preventing: "+C,data:JSON.stringify({chk:C,pos:D,obj:y&&y.id?y.id:false,par:z&&z.id?z.id:false})}}return x;case"create_node":x=(e.inArray(u,B)===-1);if(!x){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+u+" already exists. Preventing: "+C,data:JSON.stringify({chk:C,pos:D,obj:y&&y.id?y.id:false,par:z&&z.id?z.id:false})}}return x;case"copy_node":x=(e.inArray(u,B)===-1);if(!x){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+u+" already exists. Preventing: "+C,data:JSON.stringify({chk:C,pos:D,obj:y&&y.id?y.id:false,par:z&&z.id?z.id:false})}}return x;case"move_node":x=(y.parent===z.id||e.inArray(u,B)===-1);if(!x){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+u+" already exists. Preventing: "+C,data:JSON.stringify({chk:C,pos:D,obj:y&&y.id?y.id:false,par:z&&z.id?z.id:false})}}return x}return true};this.create_node=function(C,w,E,F,D){if(!w||w.text===f){if(C===null){C="#"}C=this.get_node(C);if(!C){return t.create_node.call(this,C,w,E,F,D)}E=E===f?"last":E;if(!E.toString().match(/^(before|after)$/)&&!D&&!this.is_loaded(C)){return t.create_node.call(this,C,w,E,F,D)}if(!w){w={}}var A,u,B,z,y,v=this._model.data,G=this.settings.unique.case_sensitive,x=this.settings.unique.duplicate;u=A=this.get_string("New node");B=[];for(z=0,y=C.children.length;z<y;z++){B.push(G?v[C.children[z]].text:v[C.children[z]].text.toLowerCase())}z=1;while(e.inArray(G?u:u.toLowerCase(),B)!==-1){u=x.call(this,A,(++z)).toString()}w.text=u}return t.create_node.call(this,C,w,E,F,D)}};var i=document.createElement("DIV");i.setAttribute("unselectable","on");i.setAttribute("role","presentation");i.className="jstree-wholerow";i.innerHTML="&#160;";e.jstree.plugins.wholerow=function(s,t){this.bind=function(){t.bind.call(this);this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(v,u){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(y,x){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var w=false,v,u;for(v=0,u=x.selected.length;v<u;v++){w=this.get_node(x.selected[v],true);if(w&&w.length){w.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}}},this)).on("open_node.jstree",e.proxy(function(v,u){this.get_node(u.node,true).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(v,u){if(v.type==="hover_node"&&this.is_disabled(u.node)){return}this.get_node(u.node,true).children(".jstree-wholerow")[v.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(v){v.preventDefault();var u=e.Event("contextmenu",{metaKey:v.metaKey,ctrlKey:v.ctrlKey,altKey:v.altKey,shiftKey:v.shiftKey,pageX:v.pageX,pageY:v.pageY});e(v.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(u)},this)).on("click.jstree",".jstree-wholerow",function(v){v.stopImmediatePropagation();var u=e.Event("click",{metaKey:v.metaKey,ctrlKey:v.ctrlKey,altKey:v.altKey,shiftKey:v.shiftKey});e(v.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(u).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(v){v.stopImmediatePropagation();var u=e.Event("click",{metaKey:v.metaKey,ctrlKey:v.ctrlKey,altKey:v.altKey,shiftKey:v.shiftKey});e(v.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(u).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(u){u.stopImmediatePropagation();if(!this.is_disabled(u.currentTarget)){this.hover_node(u.currentTarget)}return false},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(u){this.dehover_node(u.currentTarget)},this))};this.teardown=function(){if(this.settings.wholerow){this.element.find(".jstree-wholerow").remove()}t.teardown.call(this)};this.redraw_node=function(x,u,y,w){x=t.redraw_node.apply(this,arguments);if(x){var v=i.cloneNode(true);if(e.inArray(x.id,this._data.core.selected)!==-1){v.className+=" jstree-wholerow-clicked"}if(this._data.core.focused&&this._data.core.focused===x.id){v.className+=" jstree-wholerow-hovered"}x.insertBefore(v,x.childNodes[0])}return x}};(function(t){if(document.registerElement&&Object&&Object.create){var s=Object.create(HTMLElement.prototype);s.createdCallback=function(){var w={core:{},plugins:[]},v;for(v in t.jstree.plugins){if(t.jstree.plugins.hasOwnProperty(v)&&this.attributes[v]){w.plugins.push(v);if(this.getAttribute(v)&&JSON.parse(this.getAttribute(v))){w[v]=JSON.parse(this.getAttribute(v))}}}for(v in t.jstree.defaults.core){if(t.jstree.defaults.core.hasOwnProperty(v)&&this.attributes[v]){w.core[v]=JSON.parse(this.getAttribute(v))||this.getAttribute(v)}}jQuery(this).jstree(w)};try{document.registerElement("vakata-jstree",{prototype:s})}catch(u){}}}(jQuery))}));