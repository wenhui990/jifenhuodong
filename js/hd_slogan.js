function getSlogan(a){if(!a){alert("暂无活动");return}$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/get.do",data:{aid:a},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(d){if(d.s!=200){alert(d.r);return}if(d.r&&d.r.length>0){for(var b in d.r){var c=d.r[b];$("#slogan"+(Number(b)+1)).val(c.slogan).attr("disabled","disabled")}}if(d.b&&d.b.phone){$("#phone").val(d.b.phone).attr("disabled","disabled")}if($("#slogan1:disabled").length>0&&$("#slogan2:disabled").length>0&&$("#slogan3:disabled").length>0&&$("#phone:disabled").length>0){$("#submitButton").attr("disabled","disabled")}},error:function(b,d,c){console.log(b.responseText);console.log(b.status);console.log(b.readyState);console.log(b.statusText);console.log(d);console.log(c)}})}function addSlogan(){var f=getQueryString("aid");if(!f){alert("暂无活动");return}var e={aid:f};var d;var c;var b;var a;if($("#slogan1:disabled").length<=0){d=$("#slogan1").val()}if($("#slogan2:disabled").length<=0){c=$("#slogan2").val()}if($("#slogan3:disabled").length<=0){b=$("#slogan3").val()}if($("#phone:disabled").length<=0){a=$("#phone").val()}if(d){d=$.trim(d);if(d.length>10){alert("您的口号1不得多于10个字符");return}if(d.length>0){e.slogan1=d}}if(c){c=$.trim(c);if(c.length>10){alert("您的口号2不得多于10个字符");return}if(c.length>0){e.slogan2=c}}if(b){b=$.trim(b);if(b.length>10){alert("您的口号3不得多于10个字符");return}if(b.length>0){e.slogan3=b}}if(a){a=$.trim(a);if(a.length>0&&!/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\\d{8})?$/.test(a)){alert("请输入正确的手机号");return}}if(!d&&!c&&!b&&!a){alert("请先填写内容");return}if(!confirm("提交后无法更改，是否确认提交？")){return}$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/add.do",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(g){if(g.s!=200){alert(g.r);return}alert("提交成功");window.location=getPath()+"/htmlwx/hd_slogan_my.html?aid="+f},error:function(g,i,h){console.log(g.responseText);console.log(g.status);console.log(g.readyState);console.log(g.statusText);console.log(i);console.log(h)}})}function getMySlogan(a){if(!a){alert("暂无活动");return}$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/get.do",data:{aid:a},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(d){if(d.s!=200){alert(d.r);return}if(d.r&&d.r.length>0){for(var b in d.r){var c=d.r[b];$("#slogan"+(Number(b)+1)).html(c.slogan).show()}}if(d.b){if(d.b.phone){$("#phone").html(d.b.phone)}if(d.b.userName){$("#username").html(d.b.userName)}if(d.b.headimg){$("#headimg").attr("src",d.b.headimg);$("#headimg").error(function(){$(this).hide()})}}},error:function(b,d,c){console.log(b.responseText);console.log(b.status);console.log(b.readyState);console.log(b.statusText);console.log(d);console.log(c)}})}function getNewestSlogan(){$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/index.do",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(c){if(c.s!=200){alert(c.r);return}if(c.r&&c.r.length>0){var g=new Array();for(var d in c.r){var k=c.r[d];var j={img:k.headimg,info:k.slogan,speed:15,close:false,href:getPath()+"/htmlwx/hd_slogan_detail.html?id="+k.id,bottom:250+(d%3)*100};g[d]=j}var a=1000;var h=g.length;var f=true;var e=0;b();function b(){if(f){looper=setInterval(b,a);f=false}$("body").barrager(g[e]);e++;if(e>=h){e=0}}}if(c.b){$("#myslogan").attr("href","hd_slogan_my.html?aid="+c.b.id);$("#addslogan").attr("href","hd_slogan_add.html?aid="+c.b.id);$("#voteLink").attr("href","hd_slogan_vote.html")}},error:function(a,c,b){console.log(a.responseText);console.log(a.status);console.log(a.readyState);console.log(a.statusText);console.log(c);console.log(b)}})}function getSloganDetail(a){if(!a){alert("暂无口号");return}$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/detail.do",data:{id:a},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(c){if(c.s!=200){alert(c.r);return}if(c.r){var b=c.r;$("#headimg").attr("src",b.headimg);$("#username").html(b.userName);$("#slogan").html(b.slogan)}},error:function(b,d,c){console.log(b.responseText);console.log(b.status);console.log(b.readyState);console.log(b.statusText);console.log(d);console.log(c)}})}var limit=0;function getSloganRank(a){$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/rank.do",data:{aid:a,limit:limit},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(e){if(e.s!=200){alert(e.r);return}if(e.r&&e.r.length>0){var d="";for(var b in e.r){var c=e.r[b];d+="<div>第"+(Number(b)+limit+1)+"名</div>";d+="<div>"+c.userName+"</div>";d+="<div>"+c.count+"票</div>";d+="<img src='"+c.headimg+"'/>";d+="<div>"+c.slogan+"</div>"}$("#rankDiv").html(d);limit+=30}},error:function(b,d,c){console.log(b.responseText);console.log(b.status);console.log(b.readyState);console.log(b.statusText);console.log(d);console.log(c)}})}var limit2=0;function getVotePage(){$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/votepage.do",data:{limit:limit2},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(g){if(g.s!=200){alert(g.r);return}if(g.b){$("#activityName").html(g.b.name);$("#sloganCount").html(g.b.sloganCount);$("#voteCount").html(g.b.voteCount);$("#accessCount").html(g.b.param2);$("#startDiv").html(formatDateYMDHM(g.b.startTime));$("#endDiv").html(formatDateYMDHM(g.b.endTime));$("#rankPage").attr("href",$("#rankPage").attr("href")+"?aid="+g.b.id)}if(g.r&&g.r.length>0){var f="";for(var d in g.r){var e=g.r[d];f+="<div>"+e.id+"</div>";f+="<div>"+e.userName+"</div>";f+="<img src='"+e.headimg+"'/>";f+="<div>"+e.slogan+"</div>";var a=false;if(g.t&&g.t.length>0){for(var c in g.t){var b=g.t[c];if(e.id==b.sid){a=true;break}}}if(a){f+="<input type='button' disabled='disabled' onclick='vote("+g.b.id+","+e.id+")' value='投票' />"}else{f+="<input type='button' onclick='vote("+g.b.id+","+e.id+")' value='投票' />"}f+="<div>"+e.count+"票</div>"}$("#voteDiv").html(f);limit+=30}},error:function(a,c,b){console.log(a.responseText);console.log(a.status);console.log(a.readyState);console.log(a.statusText);console.log(c);console.log(b)}})}function vote(b,a){if(!b||!a){alert("参数错误");return}$.ajax({async:false,type:"post",url:getPath()+"/web/slogan/vote.do",data:{aid:b,sid:a},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(c){if(c.s!=200){alert(c.r);return}alert("投票成功");window.location.reload()},error:function(c,e,d){console.log(c.responseText);console.log(c.status);console.log(c.readyState);console.log(c.statusText);console.log(e);console.log(d)}})};