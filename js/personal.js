function myOdds(d){$(".m-list2").empty();showLoading();var c="";var f="";var b="";var a="";var e="";$.ajax({type:"post",url:getPath()+"/web/bet/queryUserBet.do",data:"date="+d,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(o){hideLoading();if(o.s==200&&o.r){if(o.t<0){$("#totalBounus").html("--.--")}else{$("#totalBounus").html(o.t)}if(o.b<0){$("#totalConsume").html("--")}else{$("#totalConsume").html(o.b)}for(i in o.r){var r=o.r[i];if(r.matchType==0){f="竞彩足球";b="ftb"}else{if(r.matchType==1){f="竞彩篮球";b="bskb"}}if(r.bonus<0){a="未开奖"}else{if(r.bonus==0){a="未中奖"}else{a="已中奖:<u onclick='showDetail("+JSON.stringify(r.passType)+","+JSON.stringify(r.winOdds)+","+r.multiple+","+JSON.stringify(r.winOddsShow)+")'>"+r.bonus+"元</u>"}}if(checkPassType(r.pass)=="freepass"){e="自由过关"}else{e="普通过关"}c+="<div class='mItem'>";c+="<div class='m-list1 m-list3'>";c+="<div class='m-mon'><b class='matchType "+b+"'>"+f+"</b><span>投注金额：<i class='red '>"+r.consume+"</i>&nbsp;元</span></div>";c+="<div class='m-mon'><b class='oddsTime'>"+r.buyTime+"</b><span><i class='brown'>"+a+"</i></span></div>";c+="<div class='m-mon'><span><i class='brown'>"+e+"</i></span></div>";c+="</div>";c+="<div class='m-tab'>";c+="<div class='u-det'><ul><li>"+r.multiple+"倍</li><li>"+r.pass+"</li></ul></div>";c+="<table cellspacing='0' cellpadding='0' border='0'>";var h="主队VS客队";if(r.matchType==1){h="客队VS主队"}c+="<tr><th>赛事编号</th><th>"+h+"</th><th>比分</th><th>投注&彩果</th></tr>";var g=r.pass.indexOf("单关")!=-1;for(j in r.list){var t=r.list[j];var p="<td>";p+="<table>";var q=0;for(var n in t.bet){p+="<tr>";p+="<td>";var l=t.bet[n];for(var m in l.odds){if("sg"==m){if("1"==l.odds[m]){q=1}continue}var s=l.odds[m];p+="<span>"+s+"</span><br>"}p+="</td>";if(l.betResult=="-2"){p+="<td class='red'>暂无</td>"}else{p+="<td class='red'>"+l.betResult+"</td>"}p+="</tr>"}p+="</table>";p+="</td>";if(r.matchType==1){c+="<tr><td";if(g&&q==1){c+=" class='myodds_single'"}c+=">"+t.alias+"</td><td><div class='f-tl'><span class='f-tl-k'>【客】</span>"+t.guest+"<br><span class='f-tl-k'>【主】</span>"+t.home+"</div></td>"}else{c+="<tr><td";if(g&&q==1){c+=" class='myodds_single'"}c+=">"+t.alias+"</td><td><div class='f-tl'><span class='f-tl-k'>【主】</span>"+t.home+"<br><span class='f-tl-k'>【客】</span>"+t.guest+"</div></td>"}if(t.hfs==-1||t.gfs==-1){c+="<td>暂无</td>"}else{if(r.matchType==1){c+="<td>"+t.gfs+":"+t.hfs+"</td>"}else{c+="<td>"+t.hfs+":"+t.gfs+"</td>"}}c+=p;c+="</tr>"}c+="</table>";c+="</div></div>"}$(".m-list2").append(c)}else{$(".m-list2").append("<div class='matchItem' style='background-image:none;'><div class='item_head_right'><span style='width:100%'>"+getResult(o)+"</span></div><div class='clearf'></div></div>");$("#totalBounus").html("--.--");$("#totalConsume").html("--")}},error:function(g,k,h){console.log(g.responseText);console.log(g.status);console.log(g.readyState);console.log(g.statusText);console.log(k);console.log(h)}})}function getResult(a){if(a.s==501){return"<div class='login_pop'>去<a href='"+a.r+"'>登录</a></div>"}else{return a.r}}function myFollows(d){$(".m-list2").empty();showLoading();var c="";var e="";var b="";var a="";$.ajax({type:"post",url:getPath()+"/web/bet/queryFollow.do",data:"date="+d,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(h){hideLoading();if(h.s==200&&h.r){var g=h.r[0];if(g){c+="<div class='mItem'>";c+="<div class='m-list1 m-list3'>";c+="<div><b class='matchType ftb'>足球竞彩</b></div>";c+="</div>";c+="<div class='m-tab'>";c+="<table cellspacing='0' cellpadding='0' border='0'>";c+="<tr><th>赛事编号</th><th>主队VS客队</th><th>比分</th><th>操作</th></tr>";for(j in g){var k=g[j];c+="<tr><td>"+k.alias+"</td><td><div class='f-tl colorfc' onclick=gotoMatch("+k.mid+",0,"+k.hid+","+k.gid+")>【主】"+k.home+"<br>【客】"+k.guest+"</div></td>";if(k.hfs=="-1"||k.gfs=="-1"){c+="<td class='red' id='"+k.mid+"td'>暂无比分</td>"}else{c+="</td><td class='red' id='"+k.mid+"td'>"+k.hfs+":"+k.gfs+"</td>"}c+="<td><a class='removefollow' href='#' onclick='followMatch(0,"+k.mid+")'>取消关注</a></td>";c+="</tr>"}c+="</table>";c+="</div></div>"}var f=h.r[1];if(f){c+="<div class='mItem'>";c+="<div class='m-list1 m-list3'>";c+="<div><b class='matchType bskb'>篮球竞彩</b></div>";c+="</div>";c+="<div class='m-tab'>";c+="<table cellspacing='0' cellpadding='0' border='0'>";c+="<tr><th>赛事编号</th><th>客队VS主队</th><th>比分</th><th>操作</th></tr>";for(j in f){var k=f[j];c+="<tr><td>"+k.alias+"</td><td><div class='f-tl colorfc' onclick=gotoMatch("+k.mid+",1,"+k.hid+","+k.gid+")>【客】"+k.guest+"<br>【主】"+k.home+"</div></td>";if(k.hfs=="-1"||k.gfs=="-1"){c+="<td class='red' id='"+k.mid+"td'>暂无比分</td>"}else{c+="</td><td class='red' id='"+k.mid+"td'>"+k.gfs+":"+k.hfs+"</td>"}c+="<td><a class='removefollow' href='#' onclick='followMatch(1,"+k.mid+")'>取消关注</a></td>";c+="</tr>"}c+="</tr></table>";c+="</div></div>"}$(".m-list2").append(c)}else{$(".m-list2").append("<div class='matchItem' style='background-image:none;'><div class='item_head_right'><span style='width:100%'>"+getResult(h)+"</span></div><div class='clearf'></div></div>")}},error:function(f,h,g){console.log(f.responseText);console.log(f.status);console.log(f.readyState);console.log(f.statusText);console.log(h);console.log(g)}})}function gotoMatch(b,d,a,c){if($("#"+b+"td").html()=="暂无比分"){if(d==0){window.location.href=getPath()+"/htmlwx/matchResult.html?mid="+b+"&hid="+a+"&gid="+c}else{window.location.href=getPath()+"/htmlwx/matchResultBasketBall.html?mid="+b+"&hid="+a+"&gid="+c}}else{if(d==0){window.location.href=getPath()+"/htmlwx/matchResult.html?mid="+b}else{window.location.href=getPath()+"/htmlwx/matchResultBasketBall.html?mid="+b}}}function oddsData(){var a="";for(i=0;i<=14;i++){a+="<option>"+dateToday(-i)+"</option>"}$("#dataSelect").append(a)}function dateToday(e){var b=new Date();b.setDate(b.getDate()+e);var f=b.getFullYear();var a=b.getMonth()+1;var c=b.getDate();return f+"-"+a+"-"+c}function showLoading(){$("body").append("<div class='loading_wrap'><span class='loading_ico'></span></div>")}function hideLoading(){$(".loading_wrap").remove()}function getResult(a){if(a.s==501){return"<div class='login_pop'>去<a href='"+a.r+"'>登录</a></div>"}else{return"<div class='login_pop'>"+a.r+"</div>"}}function followMatch(b,a){if((b!=0&&b!=1)||!a){return}showLoading();$.ajax({type:"post",url:getPath()+"/web/bet/follow.do",data:"matchType="+b+"&matchNum="+a+"&collect=false",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(c){hideLoading();if(c.s==200){location.reload()}else{$("#data").html(getResult(c))}},error:function(c,e,d){hideLoading();console.log(c.responseText);console.log(c.status);console.log(c.readyState);console.log(c.statusText);console.log(e);console.log(d)}})}function checkPassType(e){var b=["2x1","3x1","4x1","5x1","6x1","7x1","8x1"];var a="freepass";var d=e.split(",");for(var c=0;c<d.length;c++){if(b.indexOf(d[c])==-1){a="commonpass"}}return a}function showDetail(f,b,a,d){var e="";var g=-1;for(var c=1;c<=8;++c){if(!f[c]){continue}if(-1==g){g=c}if(c==1){text="单关"}else{text=c+"串1"}e+="<div class='showModeEvery' id='oddsDetail"+c+"' onclick='clickOdds("+c+","+JSON.stringify(f[c])+',"'+a+'",'+JSON.stringify(b)+","+JSON.stringify(d)+")'><span class='showModeText'>"+text+"</span></div>"}$("#passDiv").html(e);$("#oddsDetail"+g).click();$("#bonusDetail").show();setScroll(false)}function clickOdds(t,c,w,b,d){var f=$("#oddsDetail"+t);if(f.hasClass("checked")){return}else{if(!f.hasClass("checked")){f.addClass("checked").siblings().removeClass("checked");var u=bonusDetail[t];if(t==1){$("#passSpan").html("单关")}else{$("#passSpan").html(t+"串1")}var r=0;var g=1;var n=0;var x="<div class='pass_list'>";var y=0;for(var q in c){var a=1;var e="<div class='pass_item'>【"+(g++)+"】";if(q.indexOf("*")==-1){for(var p=0;p<q.length;++p){var h=q.charAt(p);if(d[h].length>1){var v="(";for(var m in d[h]){v+=d[h][m];if(m<d[h].length-1){v+="+"}}v+=")*";e+=v}else{e+=b[h]+"*"}a*=b[h]}}else{e+=q;var l=q.split("*");for(var h in l){if(l[h].length>0){a*=Number(l[h])}}}var s=c[q];n+=s;a*=s*w*2;e+=s+"注*";e+=w+"倍*";r+=a;e+="2元="+a.toFixed(2)+"元";e+="</div>";x+=e;y+=a}$("#countSpan").html(n*w);$("#bonusSpan").html(y.toFixed(2));$("#detailDiv").html(x)}}}function setScroll(a){if(a){$("body").css({overflow:"auto"});$("html").css({overflow:"auto"})}else{$("html").css({height:"100%",overflow:"hidden"});$("body").css({height:"100%",overflow:"hidden"})}}function hidePop(){$("#bonusDetail").hide();setScroll(true)};