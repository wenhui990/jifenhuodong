var scoreB=["1:0","2:0","2:1","3:0","3:1","3:2","4:0","4:1","4:2","4:3","5:0","5:1","5:2","6:0","6:1","7:0","qts","0:0","1:1","2:2","3:3","qtp","0:1","0:2","1:2","0:3","1:3","2:3","0:4","1:4","2:4","3:4","0:5","1:5","2:5","0:6","1:6","0:7","qtf"];var sfpList=["s","f","p"];var rsfpList=["-1:s","+1:f","-2:p"];var scoreList=["1:0","2:0","2:1","3:0","3:1","3:2","4:0","4:1","4:2","5:0","5:1","5:2","qts","0:0","1:1","2:2","3:3","qtp","0:1","0:2","1:2","0:3","1:3","2:3","0:4","1:4","2:4","0:5","1:5","2:5","qtf"];var totalballList=["0","1","2","3","4","5","6","7"];var halfList=["ss","sp","sf","ps","pp","pf","fs","fp","ff"];function sfpToscore(e){if(e=="s"){var d=scoreB.indexOf("1:0");var c=scoreB.indexOf("qts");return scoreB.slice(d,c+1)}if(e=="p"){var d=scoreB.indexOf("0:0");var c=scoreB.indexOf("qtp");return scoreB.slice(d,c+1)}if(e=="f"){var d=scoreB.indexOf("0:1");var c=scoreB.indexOf("qtf");return scoreB.slice(d)}}function rsfpToscore(h){var e=h.split(":");var a=e[0].slice(0,1);var c=Number(e[0].slice(1));var f=e[1];var l=[];if(a=="-"){for(var d=0;d<scoreB.length;d++){var j=scoreB[d];if(j.indexOf("qt")!=-1){continue}var g=Number(j.slice(0,1));var b=Number(j.slice(2));if((g-b>c)&&(f=="s")){l.push(j)}if((g-b==c)&&(f=="p")){l.push(j)}if((g-b<c)&&(f=="f")){l.push(j)}}if(f=="s"){l.push("qts")}if(f=="p"){l.push("qts")}if(f=="f"){if(c==1){l.push("qtp");l.push("qtf")}else{l.push("qts");l.push("qtp");l.push("qtf")}}}if(a=="+"){for(var d=0;d<scoreB.length;d++){var j=scoreB[d];if(j.indexOf("qt")!=-1){continue}var g=Number(j.slice(0,1));var b=Number(j.slice(2));if((b-g<c)&&(f=="s")){l.push(j)}if((b-g==c)&&(f=="p")){l.push(j)}if((b-g>c)&&(f=="f")){l.push(j)}}if(f=="s"){if(c==1){l.push("qts");l.push("qtp")}else{l.push("qts");l.push("qtp");l.push("qtf")}}if(f=="p"){l.push("qtf")}if(f=="f"){l.push("qtf")}}return l}function totalballToscore(a){var b=[["0:0"],["1:0","0:1"],["2:0","1:1","0:2"],["3:0","2:1","1:2","0:3"],["4:0","3:1","2:2","1:3","0:4"],["5:0","4:1","3:2","2:3","1:4","0:5"],["6:0","5:1","4:2","3:3","2:4","1:5","0:6"],["7:0","6:1","5:2","4:3","3:4","2:5","1:6","0:7","qts","qtp","qtf"]];return b[Number(a)]}function halfToscore(l){var h=scoreB.indexOf("1:0");var e=scoreB.indexOf("qts");var k=scoreB.indexOf("0:0");var g=scoreB.indexOf("qtp");var c=scoreB.indexOf("0:1");var a=scoreB.indexOf("qtf");if(l=="ss"||l=="ps"){return scoreB.slice(h,e+1)}if(l=="sp"||l=="fp"){return scoreB.slice(k+1,g+1)}if(l=="sf"){var f=[];var j=scoreB.slice(c);for(var d=0;d<j.length;d++){if(j[d].indexOf("0")!=0){f.push(j[d])}}return f}if(l=="pp"){return scoreB.slice(k,g+1)}if(l=="pf"){return scoreB.slice(c)}if(l=="fs"){var f=[];var b=scoreB.slice(h,e+1);for(var d=0;d<b.length;d++){if(b[d].indexOf("0")!=2){f.push(b[d])}}return f}if(l=="ff"){var f=[];var j=scoreB.slice(c);for(var d=0;d<j.length;d++){if(j[d].indexOf("0")!=2){f.push(j[d])}}return f}}function checkMixed(k){var f=0;for(var d=0;d<k.length;d++){f+=Number(k[d][2]);var h=k[d];if(h[0]=="sfp"){var b=sfpToscore(h[1]);h.push(b)}if(h[0]=="rsfp"){var b=rsfpToscore(h[1]);h.push(b)}if(h[0]=="totalball"){var b=totalballToscore(h[1]);h.push(b)}if(h[0]=="half"){var b=halfToscore(h[1]);h.push(b)}if(h[0]=="score"){var b=[h[1]];h.push(b)}}var a=k[0][3];for(var d=1;d<k.length;d++){var b=k[d][3];var e=[];for(var c=0;c<b.length;c++){var g=a.indexOf(b[c]);if(g!=-1){e.push(b[c])}}a=e}for(var d=0;d<k.length;d++){k[d].splice(-1,1)}if(a.length==0){return 0}else{return 1}}function combine(a){if(a.length>1){var e=a[0].length,c=a[1].length,g=a.slice(0),b=[];for(var f=0;f<e;f++){for(var d=0;d<c;d++){b.push(a[0][f]+a[1][d])}}g.splice(0,2,b);return arguments.callee(g)}return a[0]}function CMN(c,g,a){var a=a?a:[];var d=c.length;var h=d-g;var b=c.slice(0);var f=b.shift();f=f.constructor===Array?f:[f];(function e(m,i){var o;var l=i.slice(0);var n=g-m.length;if(n==0){a.push(m);return}if(n==1){for(var k in i){o=m.slice(0);o.push(i[k]);a.push(o)}}if(n>1){o=m.slice(0);o.push(l.shift());e(o,l);if(m.length+l.length>=g){e(m,l)}}})(f,b);if(b.length>=g){return CMN(b,g,a)}else{return a}}function cm1Tcmm(h){var l=[];var f=[];for(var e=0;e<h.length;e++){var k=JSON.stringify(h[e]);f.push(k)}var b=[];for(var e=1;e<=f.length;e++){var g=CMN(f,e);b=b.concat(g)}for(var e=0;e<b.length;e++){var c=[];for(var d=0;d<b[e].length;d++){var a=JSON.parse(b[e][d]);c.push(a)}l.push(c)}return l}function t_sfpToscore(){var b="f";var a=sfpToscore(b)}function t_totalballToscore(){var b=7;var a=totalballToscore(b)}function t_halfToscore(){for(var a=0;a<halfList.length;a++){var b=halfToscore(halfList[a])}}function t_rsfpToscore(){var a="+6:f";var b=rsfpToscore(a)}function subgroup(a){var m=[];for(var d in a){if(a[d].length>0){m.push(a[d])}}var n=[];if(m.length>1){var b=combine(m);for(var g=0;g<b.length;g++){var h=b[g].split("$");var l=[];for(var e=0;e<h.length-1;e++){var c=h[e].split(",");l.push(c.slice(0,c.length-1))}n.push(l)}}else{var f=[];for(var g=0;g<m[0].length;g++){m[0][g].splice(-1,1);f.push(m[0][g])}n.push(f)}return n}function loadOdds(b,e,c,a){if(b.length==0){b={sfp:[],rsfp:[],score:[],totalball:[],half:[]}}var d=[e,c,a,"$"];if(e=="sfp"){b.sfp.push(d)}if(e=="rsfp"){b.rsfp.push(d)}if(e=="half"){b.half.push(d)}if(e=="score"){b.score.push(d)}if(e=="totalball"){b.totalball.push(d)}return b}function filterOdds(b){var f=[];var a=subgroup(b);for(var e=0;e<a.length;e++){var g=cm1Tcmm(a[e]);for(var c=0;c<g.length;c++){var d=checkMixed(g[c]);if(d==1){f.push(g[c])}}}return f}function maxAndminOdds(k){var b=Number.MAX_VALUE;var f=0;var a,g;for(var d=0;d<k.length;d++){var e=0;for(var c=0;c<k[d].length;c++){e+=Number(k[d][c][2])}if(e>f){f=e;g=k[d]}if(e<b){b=e;a=k[d]}}var h={};h.max=g;h.min=a;return h}function t_data(){var a={sfp:[],rsfp:[],score:[],totalball:[],half:[]};var c=["sfp","s",2.1,"$"];a.sfp.push(c);var k=["sfp","f",2.82,"$"];a.sfp.push(k);var e=["rsfp","-1:s",4.25,"$"];a.rsfp.push(e);var j=["half","sf",26,"$"];a.half.push(j);var g=["half","fs",22,"$"];a.half.push(g);var f=["score","2.0",9.5,"$"];a.score.push(f);var d=["score","0:3",29,"$"];a.score.push(d);var b=["score","qtf",80,"$"];a.score.push(b);var i=["totalball","2",3.2,"$"];a.totalball.push(i);var h=["totalball","6",18.5,"$"];a.totalball.push(h);return a}function test(){odds=new Array();odds=loadOdds(odds,"sfp","s",2.1);odds=loadOdds(odds,"sfp","f",2.82);odds=loadOdds(odds,"rsfp","-1:s",4.25);odds=loadOdds(odds,"half","sf",26);console.log("*******: "+JSON.stringify(odds));var b=filterOdds(odds);console.log("-------: "+JSON.stringify(b));var a=maxAndmixOdds(b);console.log("++++++: "+JSON.stringify(a))};